import{p as K,q as N,g as $,j as t,r as i}from"./iframe-C7YkNvSQ.js";import{B as G}from"./button-C9AJtPin.js";import{K as Q,T as R}from"./tiny-select-CrQ49Uy9.js";import{I as k}from"./input-cJKOjYWy.js";import{r as J}from"./createSvgIcon-CmLukg3o.js";import{A as te}from"./Add-Dn-QFNkM.js";import{D as ne}from"./Delete-BAIGV3ty.js";import{B}from"./Box-okHX6eyU.js";import{B as oe}from"./Badge-DnkfCYw-.js";import{T as y}from"./Typography-CIh4BeGT.js";import{M as V,a as X}from"./Select-DIwpWrco.js";import{P as Y}from"./Paper-BDm6ID2S.js";import{M as S}from"./MenuItem-BzwDd5tb.js";import{L as E}from"./ListItemIcon-B6EQeCdB.js";import{L as M}from"./ListItemText-CUqI4k6h.js";import{S as ae}from"./Stack-BPribNI5.js";import{L as Z}from"./ListSubheader-BShIKKvr.js";var z={},_;function re(){if(_)return z;_=1;var e=K();Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var o=e(J()),u=N();return z.default=(0,o.default)((0,u.jsx)("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8z"}),"ArrowUpward"),z}var ie=re();const se=$(ie);var D={},H;function le(){if(H)return D;H=1;var e=K();Object.defineProperty(D,"__esModule",{value:!0}),D.default=void 0;var o=e(J()),u=N();return D.default=(0,o.default)((0,u.jsx)("path",{d:"M16 17.01V10h-2v7.01h-3L15 21l4-3.99zM9 3 5 6.99h3V14h2V6.99h3z"}),"SwapVert"),D}var de=le();const ce=$(de),O=i.createContext(void 0);function ue(e){const[o,u]=i.useState("value"in e&&e.appearance==="filter"&&e.value?e.value:null),[x,l]=i.useState("value"in e&&e.appearance==="sort"&&e.value?e.value:[]),c={...e,filter:o,setFilter:u,sort:x,setSort:l,availableSortFields:"availableSortFields"in e?e.availableSortFields:[],filterOptions:"filterOptions"in e?e.filterOptions:[],open:e.open,valueSort:"value"in e&&e.appearance==="sort"?e.value:void 0,valueFilter:"value"in e&&e.appearance==="filter"?e.value:void 0,filterField:"field"in e&&e.appearance==="filter"?e.field:void 0,onCloseSort:"onClose"in e&&e.appearance==="sort"?e.onClose:void 0,onCloseFilter:"onClose"in e&&e.appearance==="filter"?e.onClose:void 0};return t.jsx(O.Provider,{value:c,children:e.children})}function xe(e){return t.jsx(ue,{...e,children:t.jsx(B,{sx:{display:"flex",flexDirection:"column",gap:1},children:t.jsx(pe,{appearance:e.appearance})})})}const pe=({appearance:e})=>e==="filter"?t.jsx(fe,{}):t.jsx(me,{}),ee=()=>Math.random().toString(36).substring(2,15),U={sx:{maxHeight:"233px !important","& .MuiTypography-root":{fontSize:"0.875rem"},"& .MuiListItemIcon-root":{minWidth:"28px !important",svg:{width:"20px"}},"& .MuiButtonBase-root.MuiMenuItem-root ":{borderRadius:"4px"}}},he={padding:0,maxHeight:"215px !important","& .MuiTypography-root":{fontSize:"0.875rem"},"& .MuiListItemIcon-root":{minWidth:"28px !important",svg:{width:"20px"}},"& .MuiButtonBase-root.MuiMenuItem-root ":{borderRadius:"4px"},"& .MuiMenuItem-root":{padding:"4px 8px"},"&":{padding:"8px 0"}};function me(){const{sort:e,setSort:o,open:u,onChangeSort:x,onAddSort:l,onDeleteSort:c,onChangeSortOrder:s,availableSortFields:h,onCloseSort:p,valueSort:m}=i.useContext(O),[n,v]=i.useState(),[b,F]=i.useState(null),j=d=>v(d.currentTarget),w=()=>{v(null),p==null||p()},f=d=>F(d.currentTarget),r=()=>{F(null)},L=(d,g)=>{var P;o(I=>I.map(A=>A.field===g?{...A,field:d}:A)),x==null||x(d,((P=e.find(I=>I.field===g))==null?void 0:P.order)||"ascending",g)},T=(d,g)=>{o(P=>P.map(I=>I.field===g?{...I,order:d}:I)),s==null||s(g,d)},C=d=>{o(g=>[...g,{field:d,order:"ascending"}]),l==null||l(d),r()},a=()=>{o([]),c==null||c()},q=e.map(d=>d.field),W=ee();return i.useEffect(()=>{const d=document.getElementById(W);u?d&&v(d):v(null)},[u]),i.useEffect(()=>{m&&o(m||[])},[o,m]),t.jsxs(t.Fragment,{children:[t.jsxs(G,{color:"info",id:W,sx:{backgroundColor:"#0288D114",borderRadius:"16px",display:"inline-flex",alignItems:"center",px:1.5,py:.5,width:"fit-content",textTransform:"capitalize","&:hover":{backgroundColor:"#0288D129"},boxShadow:"none !important"},onClick:j,children:[e.length>1?t.jsx(ce,{sx:{fontSize:22,color:"#0288D1"}}):t.jsx(se,{sx:{fontSize:18,color:"#0288D1"}}),t.jsx(y,{sx:{color:"#0288D1",fontWeight:500,ml:.5},variant:"body2",children:e.length===0?"Value":e.length===1?`${e[0].field}`:`${e.length} Sorts`}),t.jsx(Q,{sx:{color:"#0288D1",ml:.5}})]}),t.jsx(V,{anchorEl:n,open:!!n,onClose:w,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:-5,horizontal:"left"},elevation:1,MenuListProps:{sx:{padding:0},"aria-labelledby":"menu-button"},children:t.jsxs(Y,{elevation:0,sx:{p:"8px",display:"flex",flexDirection:"column",gap:1,width:220,border:"1px solid #0000001F",borderRadius:"5px"},children:[e.map((d,g)=>t.jsx(ve,{index:g,field:d.field,order:d.order,onSetField:L,onSetOrder:T,usedFields:q},g)),t.jsxs(X,{dense:!0,sx:{padding:0,"& .MuiMenuItem-root":{padding:"4px 8px",borderRadius:"4px"}},children:[e.length!==h.length?t.jsxs(S,{onClick:f,sx:{color:"text.disabled"},children:[t.jsx(E,{sx:{color:"text.disabled"},children:t.jsx(te,{fontSize:"small"})}),t.jsx(M,{children:t.jsx(y,{variant:"body2",children:"Add sort"})})]}):null,e.length>0?t.jsxs(S,{sx:{color:"text.disabled"},onClick:a,disabled:e.length===0,children:[t.jsx(E,{sx:{color:"text.disabled"},children:t.jsx(ne,{fontSize:"small"})}),t.jsx(M,{children:t.jsx(y,{variant:"body2",children:"Delete sort"})})]}):null]})]})}),t.jsx(ge,{open:!!b,anchorEl:b,onClose:r,onAddSort:C,usedFields:q})]})}function ve({field:e,order:o,onSetField:u,onSetOrder:x,usedFields:l}){const{availableSortFields:c}=i.useContext(O),[s,h]=i.useState(e),[p,m]=i.useState(o);i.useEffect(()=>{h(e),m(o)},[e,o]);const n=r=>{h(r),u(r,s)},v=r=>{(r==="ascending"||r==="descending")&&(m(r),x(r,s))},[b,F]=i.useState(""),j=()=>{const r=setTimeout(()=>{F(""),clearTimeout(r)},150)},w=c.filter(r=>r.label.toLowerCase().includes(b.toLowerCase())&&!l.includes(r.value)),f=l.length===c.length;return t.jsxs(B,{sx:{display:"flex",gap:"2px"},children:[t.jsxs(R,{value:s,onChange:n,onClose:j,FormControlProps:{sx:{width:"auto"}},MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:8},MenuListProps:{sx:{padding:"8px 0"},autoFocusItem:!1},PaperProps:{sx:{...U.sx,border:"1px solid #0000001F",borderRadius:"5px"},elevation:1}},sx:{fontSize:"12px !important",textTransform:"capitalize"},children:[f?null:t.jsx(Z,{disableGutters:!0,sx:{lineHeight:"normal"},children:t.jsx(k,{autoFocus:!0,appearance:"distinct",placeholder:"Search For Property",size:"small",sx:{width:"100%","& .MuiInputBase-input":{padding:"4px 8px"}},FormControlProps:{sx:{width:"100%",mb:"4px"}},onKeyDown:r=>{r.stopPropagation()},onChange:r=>F(r.target.value),value:b})}),w.map(r=>l.includes(r.value)?null:t.jsxs(S,{value:r.value,disabled:l.includes(r.value)&&r.value!==e,children:[t.jsx(E,{children:r.icon}),t.jsx(M,{children:r.label})]},r.value)),w.length===0&&b!==""&&c.length>0&&t.jsx(S,{disabled:!0,children:t.jsx(M,{children:"No fields found"})}),f&&t.jsx(S,{disabled:!0,children:t.jsx(M,{children:"All Sorts are Applied"})})]}),t.jsxs(R,{value:p,onChange:v,FormControlProps:{sx:{width:"auto"}},MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:78},PaperProps:{sx:{...U.sx,border:"1px solid #0000001F",borderRadius:"5px"},elevation:1}},sx:{fontSize:"12px !important",width:"88px !important",textTransform:"capitalize"},children:[t.jsx(S,{value:"ascending",children:"Ascending"}),t.jsx(S,{value:"descending",children:"Descending"})]})]})}function ge({open:e,anchorEl:o,onClose:u,onAddSort:x,usedFields:l}){const{availableSortFields:c}=i.useContext(O),[s,h]=i.useState(""),p=c.filter(n=>n.label.toLowerCase().includes(s.toLowerCase())&&!l.includes(n.value)),m=()=>{u();const n=setTimeout(()=>{h(""),clearTimeout(n)},150)};return t.jsx(V,{open:e,onClose:m,anchorEl:o,MenuListProps:{disablePadding:!0,sx:{px:"4px"}},anchorOrigin:{vertical:"bottom",horizontal:-10},sx:{"& .MuiPaper-root":{width:"220px !important",border:"1px solid #0000001F",borderRadius:"5px"}},elevation:1,children:t.jsxs(X,{sx:he,children:[t.jsx(Z,{disableGutters:!0,sx:{lineHeight:"normal"},children:t.jsx(k,{appearance:"distinct",placeholder:"Search For Property",size:"small",sx:{width:"100%","& .MuiInputBase-input":{padding:"4px 8px"}},FormControlProps:{sx:{width:"100%",mb:"4px"}},onKeyDown:n=>{n.stopPropagation()},onChange:n=>h(n.target.value),value:s})}),p.map(n=>l.includes(n.value)?null:t.jsxs(S,{onClick:()=>x(n.value),disabled:l.includes(n.value),children:[t.jsx(E,{children:n.icon}),t.jsx(M,{children:n.label})]},n.value)),p.length===0&&s!==""&&c.length>0&&t.jsx(S,{disabled:!0,children:t.jsx(M,{children:"No fields found"})})]})})}const Se={sx:{maxHeight:"242px !important","& .MuiTypography-root":{fontSize:"0.875rem"},"& .MuiListItemIcon-root":{minWidth:"28px !important",svg:{width:"20px"}},"& .MuiButtonBase-root.MuiMenuItem-root ":{borderRadius:"4px"}}},fe=()=>{const{filter:e,setFilter:o,open:u,onSetFilterValue:x,onClearFilter:l,onSetFilterOption:c,valueFilter:s,filterField:h,onCloseFilter:p}=i.useContext(O),[m,n]=i.useState(null),v=a=>n(a.currentTarget),b=()=>{n(null),p==null||p()},F=a=>{a==="is empty"||a==="is not empty"?(o({value:"",filterOption:a||"contains"}),w("")):o(()=>({value:(e==null?void 0:e.value)??"",filterOption:a||"contains"})),c==null||c(a)};i.useEffect(()=>{s!==void 0&&(o(s),w((s==null?void 0:s.value)||""))},[s]);const[j,w]=i.useState((s==null?void 0:s.value)||""),[f,r]=i.useState(j);i.useEffect(()=>{const a=setTimeout(()=>{r(j)},500);return()=>clearTimeout(a)},[j]),i.useEffect(()=>{f===""?(o(a=>({value:"",filterOption:a!=null&&a.filterOption?a==null?void 0:a.filterOption:"contains"})),l==null||l()):(o(a=>({value:f||"",filterOption:(a==null?void 0:a.filterOption)??"contains"})),x==null||x(f))},[f]);const L=a=>{w(a)},T=ee();i.useEffect(()=>{const a=document.getElementById(T);u?a&&n(a):n(null)},[u]);const C=(e==null?void 0:e.filterOption)==="is empty"||(e==null?void 0:e.filterOption)==="is not empty";return t.jsxs(t.Fragment,{children:[t.jsx(G,{color:"info",id:T,sx:{backgroundColor:e!=null&&e.value||C?"#0288D114":"transparent",borderRadius:"16px",display:"inline-flex",alignItems:"center",px:1.5,py:.5,width:"fit-content",textTransform:"capitalize","&:hover":{backgroundColor:e!=null&&e.value||C?"#0288D129":"#EEEDF4"},boxShadow:"none !important"},onClick:v,children:t.jsxs(oe,{sx:{alignItems:"center","& .MuiBadge-dot":{bgcolor:"#C85A15"}},variant:"dot",children:[t.jsxs(y,{sx:{color:e!=null&&e.value||C?"#0288D1":"#0000008F",fontWeight:500,ml:.5},variant:"body2",children:[t.jsx(y,{sx:{fontWeight:600,mr:.5,color:e!=null&&e.value||C?void 0:"#0000008F",fontSize:"0.875rem"},component:"span",children:"Aa"}),t.jsx(y,{sx:{mr:.5,display:"inline-flex",fontSize:"0.875rem","&::first-letter":{textTransform:"uppercase"}},children:je({value:(e==null?void 0:e.value)??"",filterOption:(e==null?void 0:e.filterOption)??"",field:h})}),t.jsx(B,{sx:{maxWidth:"120px",display:"inline-flex"},children:t.jsx(y,{sx:{mr:.5,fontSize:"0.875rem",maxWidth:"120px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap","&::first-letter":{textTransform:e!=null&&e.value&&(e==null?void 0:e.filterOption)!=="is empty"&&(e==null?void 0:e.filterOption)!=="is not empty"?"none":"uppercase "}},component:"span",noWrap:!0,children:e!=null&&e.filterOption&&C?`${e==null?void 0:e.filterOption}`:e!=null&&e.value&&(e==null?void 0:e.value.length)>0?e.value:""})})]}),t.jsx(Q,{sx:{color:e!=null&&e.value?"#0288D1":"#0000001F",ml:.5}})]})}),t.jsx(V,{anchorEl:m,open:!!m,onClose:b,anchorOrigin:{vertical:"bottom",horizontal:"left"},elevation:1,MenuListProps:{sx:{padding:0}},children:t.jsxs(Y,{elevation:0,sx:{p:1,display:"flex",flexDirection:"column",gap:1,width:220,border:"1px solid #0000001F",borderRadius:"5px"},children:[t.jsx(be,{filterField:h||void 0,field:(e==null?void 0:e.filterOption)||"contains",onSetField:F}),C?null:t.jsx(k,{autoFocus:!0,appearance:"distinct",placeholder:"Type a value...",size:"small",sx:{width:"100%","& .MuiInputBase-input":{padding:"4px 8px"}},FormControlProps:{sx:{width:"100%"}},onChange:a=>L(a.target.value),value:j})]})})]})};function be({field:e,onSetField:o,filterField:u="name"}){const{filterOptions:x}=i.useContext(O),[l,c]=i.useState(e);i.useEffect(()=>{c(e)},[e]);const s=n=>{c(n),o(n)},[h,p]=i.useState(null),m=x.findIndex(n=>n.value===l);return t.jsxs(ae,{sx:{flexDirection:"row",gap:1,alignItems:"center"},children:[t.jsx(y,{sx:{fontSize:"12px",color:"#0000001F",textTransform:"capitalize",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},component:"span",children:u}),t.jsx(R,{value:l,onChange:s,onOpen:()=>p(m),FormControlProps:{sx:{width:"auto !important"}},MenuProps:{anchorOrigin:{vertical:30,horizontal:"center"},PaperProps:{sx:{...Se.sx,border:"1px solid #0000001F",borderRadius:"5px","&:hover li.Mui-selected":{backgroundColor:"transparent"}},elevation:1}},sx:{fontSize:"12px !important",textTransform:"capitalize",minWidth:"60px !important",maxWidth:"130px !important",width:"auto !important"},children:x.map((n,v)=>t.jsx(S,{value:n.value,onMouseEnter:()=>p(v),sx:{backgroundColor:h===v?"rgba(0, 0, 0, 0.04)":"transparent","&.Mui-selected":{backgroundColor:h===v?"rgba(0, 0, 0, 0.04)":"transparent"},"&.Mui-selected:hover":{backgroundColor:"rgba(0, 0, 0, 0.04) !important"},"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:t.jsx(M,{sx:{textTransform:"capitalize"},children:n.label})},n.value))})]})}const je=e=>{let o="";switch(e==null?void 0:e.filterOption){case"starts with":o="starts with ";break;case"ends with":o="ends with ";break;case"does not contain":case"is not":o="not ";break;default:o="";break}return t.jsxs(t.Fragment,{children:[(e==null?void 0:e.field)||"Value",e!=null&&e.value&&e!=null&&e.filterOption?` : ${o}`:""]})};xe.__docgenInfo={description:"",methods:[],displayName:"DetailSelect"};export{xe as D,ce as S};
