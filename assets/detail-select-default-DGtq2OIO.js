import{i as G,k as J,g as Q,j as t,r as o}from"./iframe-BIRbnDU3.js";import{B as U}from"./button-BcP49Cyf.js";import{K as H,T as A}from"./tiny-select-Cda-kuWo.js";import{I as E}from"./input-CM_-x6T2.js";import{r as X}from"./createSvgIcon-Co9ghxje.js";import{A as Y}from"./Add-CvossPtt.js";import{D as Z}from"./Delete-HDbAFf9x.js";import{S as ee}from"./SwapVert-Cd4EJ95H.js";import{B}from"./Box-CF8wFioY.js";import{B as te}from"./Badge-BZ6w4LUh.js";import{T as w}from"./Typography-Cd3v5_Xb.js";import{M as R,a as K}from"./Select-DHZTV8S8.js";import{P as V}from"./Paper-rDORrwMN.js";import{M as f}from"./MenuItem-BDVB43Er.js";import{L}from"./Tag-CzebFKrF.js";import{L as F}from"./ListItemText-C-knhhzz.js";import{S as oe}from"./Stack-p8V-8Yyf.js";import{L as ne}from"./ListSubheader-Br1BxnEU.js";var P={},q;function re(){if(q)return P;q=1;var e=G();Object.defineProperty(P,"__esModule",{value:!0}),P.default=void 0;var a=e(X()),p=J();return P.default=(0,a.default)((0,p.jsx)("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8z"}),"ArrowUpward"),P}var ae=re();const ie=Q(ae),z=o.createContext(void 0);function le(e){const[a,p]=o.useState(null),[u,s]=o.useState([]),i={...e,filter:a,setFilter:p,sort:u,setSort:s,availableSortFields:"availableSortFields"in e?e.availableSortFields:[],filterOptions:"filterOptions"in e?e.filterOptions:[],open:e.open,valueSort:"value"in e&&e.appearance==="sort"?e.value:void 0,valueFilter:"value"in e&&e.appearance==="filter"?e.value:void 0,filterField:"field"in e&&e.appearance==="filter"?e.field:void 0,onCloseSort:"onClose"in e&&e.appearance==="sort"?e.onClose:void 0,onCloseFilter:"onClose"in e&&e.appearance==="filter"?e.onClose:void 0};return t.jsx(z.Provider,{value:i,children:e.children})}function se(e){return t.jsx(le,{...e,children:t.jsx(B,{sx:{display:"flex",flexDirection:"column",gap:1},children:t.jsx(de,{appearance:e.appearance})})})}const de=({appearance:e})=>e==="filter"?t.jsx(me,{}):t.jsx(ue,{}),N=()=>Math.random().toString(36).substring(2,15),_={sx:{maxHeight:"233px !important","& .MuiTypography-root":{fontSize:"0.875rem"},"& .MuiListItemIcon-root":{minWidth:"28px !important",svg:{width:"20px"}},"& .MuiButtonBase-root.MuiMenuItem-root ":{borderRadius:"4px"}}},ce={padding:0,maxHeight:"215px !important","& .MuiTypography-root":{fontSize:"0.875rem"},"& .MuiListItemIcon-root":{minWidth:"28px !important",svg:{width:"20px"}},"& .MuiButtonBase-root.MuiMenuItem-root ":{borderRadius:"4px"},"& .MuiMenuItem-root":{padding:"4px 8px"},"&":{padding:"8px 0"}};function ue(){const{sort:e,setSort:a,open:p,onChangeSort:u,onAddSort:s,onDeleteSort:i,onChangeSortOrder:c,availableSortFields:h,valueSort:m,onCloseSort:r}=o.useContext(z),[d,g]=o.useState(),[S,I]=o.useState(null),M=l=>g(l.currentTarget),C=()=>{g(null),r==null||r()},n=l=>I(l.currentTarget),D=()=>{I(null)},b=(l,v)=>{var O;a(y=>y.map(T=>T.field===v?{...T,field:l}:T)),u==null||u(l,((O=e.find(y=>y.field===v))==null?void 0:O.order)||"ascending",v)},x=(l,v)=>{a(O=>O.map(y=>y.field===v?{...y,order:l}:y)),c==null||c(v,l)},j=l=>{a(v=>[...v,{field:l,order:"ascending"}]),s==null||s(l),e.length===h.length-1&&D()},$=()=>{a([]),i==null||i()},k=e.map(l=>l.field),W=N();return o.useEffect(()=>{const l=document.getElementById(W);p?l&&g(l):g(null)},[p]),o.useEffect(()=>{a(m||[])},[m]),t.jsxs(t.Fragment,{children:[t.jsxs(U,{color:"info",id:W,sx:{backgroundColor:"#0288D114",borderRadius:"16px",display:"inline-flex",alignItems:"center",px:1.5,py:.5,width:"fit-content",textTransform:"capitalize","&:hover":{backgroundColor:"#0288D129"},boxShadow:"none !important"},onClick:M,children:[e.length>1?t.jsx(ee,{sx:{fontSize:22,color:"#0288D1"}}):t.jsx(ie,{sx:{fontSize:18,color:"#0288D1"}}),t.jsx(w,{sx:{color:"#0288D1",fontWeight:500,ml:.5},variant:"body2",children:e.length===0?"Value":e.length===1?`${e[0].field}`:`${e.length} Sorts`}),t.jsx(H,{sx:{color:"#0288D1",ml:.5}})]}),t.jsx(R,{anchorEl:d,open:!!d,onClose:C,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:-5,horizontal:"left"},elevation:1,MenuListProps:{sx:{padding:0},"aria-labelledby":"menu-button"},children:t.jsxs(V,{elevation:0,sx:{p:"8px",display:"flex",flexDirection:"column",gap:1,width:220,border:"1px solid #0000001F",borderRadius:"5px"},children:[e.map((l,v)=>t.jsx(xe,{index:v,field:l.field,order:l.order,onSetField:b,onSetOrder:x,usedFields:k},v)),t.jsxs(K,{dense:!0,sx:{padding:0,"& .MuiMenuItem-root":{padding:"4px 8px",borderRadius:"4px"}},children:[e.length!==h.length?t.jsxs(f,{onClick:n,sx:{color:"text.disabled"},children:[t.jsx(L,{sx:{color:"text.disabled"},children:t.jsx(Y,{fontSize:"small"})}),t.jsx(F,{children:t.jsx(w,{variant:"body2",children:"Add sort"})})]}):null,e.length>0?t.jsxs(f,{sx:{color:"text.disabled"},onClick:$,disabled:e.length===0,children:[t.jsx(L,{sx:{color:"text.disabled"},children:t.jsx(Z,{fontSize:"small"})}),t.jsx(F,{children:t.jsx(w,{variant:"body2",children:"Delete sort"})})]}):null]})]})}),t.jsx(pe,{open:!!S,anchorEl:S,onClose:D,onAddSort:j,usedFields:k})]})}function xe({field:e,order:a,onSetField:p,onSetOrder:u,usedFields:s}){const{availableSortFields:i}=o.useContext(z),[c,h]=o.useState(e),[m,r]=o.useState(a);o.useEffect(()=>{h(e),r(a)},[e,a]);const d=n=>{h(n),p(n,c)},g=n=>{(n==="ascending"||n==="descending")&&(r(n),u(n,c))},[S,I]=o.useState("");o.useEffect(()=>{S!==""&&I("")},[]);const M=i.filter(n=>n.label.toLowerCase().includes(S.toLowerCase())),C=s.length===i.length;return t.jsxs(B,{sx:{display:"flex",gap:"2px"},children:[t.jsxs(A,{value:c,onChange:d,FormControlProps:{sx:{width:"auto"}},MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:8},MenuListProps:{sx:{padding:"8px 0"},autoFocusItem:!1},PaperProps:{sx:{..._.sx,border:"1px solid #0000001F",borderRadius:"5px"},elevation:1}},sx:{fontSize:"12px !important",textTransform:"capitalize"},children:[C?null:t.jsx(ne,{disableGutters:!0,sx:{lineHeight:"normal"},children:t.jsx(E,{appearance:"distinct",placeholder:"Search For Property",size:"small",sx:{width:"100%","& .MuiInputBase-input":{padding:"4px 8px"}},FormControlProps:{sx:{width:"100%",mb:"4px"}},onKeyDown:n=>{n.stopPropagation()},onChange:n=>I(n.target.value),value:S})}),M.map(n=>s.includes(n.value)?null:t.jsxs(f,{value:n.value,disabled:s.includes(n.value)&&n.value!==e,children:[t.jsx(L,{children:n.icon}),t.jsx(F,{children:n.label})]},n.value)),M.length===0&&S!==""&&i.length>0&&t.jsx(f,{disabled:!0,children:t.jsx(F,{children:"No fields found"})}),C&&t.jsx(f,{disabled:!0,children:t.jsx(F,{children:"All Sorts are Applied"})})]}),t.jsxs(A,{value:m,onChange:g,FormControlProps:{sx:{width:"auto"}},MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:78},PaperProps:{sx:{..._.sx,border:"1px solid #0000001F",borderRadius:"5px"},elevation:1}},sx:{fontSize:"12px !important",width:"88px !important",textTransform:"capitalize"},children:[t.jsx(f,{value:"ascending",children:"Ascending"}),t.jsx(f,{value:"descending",children:"Descending"})]})]})}function pe({open:e,anchorEl:a,onClose:p,onAddSort:u,usedFields:s}){const[i,c]=o.useState(""),{availableSortFields:h}=o.useContext(z),m=h.filter(r=>r.label.toLowerCase().includes(i.toLowerCase()));return t.jsx(R,{open:e,onClose:p,anchorEl:a,MenuListProps:{disablePadding:!0,sx:{px:"4px"}},anchorOrigin:{vertical:"bottom",horizontal:-10},sx:{"& .MuiPaper-root":{width:"220px !important",border:"1px solid #0000001F",borderRadius:"5px"}},elevation:1,disableAutoFocusItem:!0,children:t.jsxs(K,{sx:ce,autoFocusItem:!1,children:[t.jsx(E,{autoFocus:!0,appearance:"distinct",placeholder:"Search For Property",size:"small",sx:{width:"100%","& .MuiInputBase-input":{padding:"4px 8px"}},FormControlProps:{sx:{width:"100%",mb:"4px"}},onKeyDown:r=>{r.stopPropagation()},onChange:r=>c(r.target.value),value:i}),m.map(r=>s.includes(r.value)?null:t.jsxs(f,{onClick:()=>u(r.value),disabled:s.includes(r.value),children:[t.jsx(L,{children:r.icon}),t.jsx(F,{children:r.label})]},r.value)),m.length===0&&i!==""&&h.length>0&&t.jsx(f,{disabled:!0,children:t.jsx(F,{children:"No fields found"})})]})})}const he={sx:{maxHeight:"242px !important","& .MuiTypography-root":{fontSize:"0.875rem"},"& .MuiListItemIcon-root":{minWidth:"28px !important",svg:{width:"20px"}},"& .MuiButtonBase-root.MuiMenuItem-root ":{borderRadius:"4px"}}},me=()=>{const{filter:e,setFilter:a,open:p,onSetFilterValue:u,onClearFilter:s,onSetFilterOption:i,valueFilter:c,filterField:h,onCloseFilter:m}=o.useContext(z),[r,d]=o.useState(null),g=x=>d(x.currentTarget),S=()=>{d(null),m==null||m()},I=x=>{a(j=>({value:(j==null?void 0:j.value)??"",filterOption:x||"contains"})),i==null||i(x)},[M,C]=o.useState((e==null?void 0:e.value)||"");o.useEffect(()=>{M!==""&&C("")},[]);const n=x=>{C(x),x===""?(a(null),s==null||s()):(a(j=>({value:x||"",filterOption:(j==null?void 0:j.filterOption)??"contains"})),u==null||u(x))},D=N();o.useEffect(()=>{const x=document.getElementById(D);p?x&&d(x):d(null)},[p]),o.useEffect(()=>{a(c||null),C((c==null?void 0:c.value)||"")},[c]);const b=(e==null?void 0:e.filterOption)==="is empty"||(e==null?void 0:e.filterOption)==="is not empty";return t.jsxs(t.Fragment,{children:[t.jsx(U,{color:"info",id:D,sx:{backgroundColor:e!=null&&e.value||b?"#0288D114":"transparent",borderRadius:"16px",display:"inline-flex",alignItems:"center",px:1.5,py:.5,width:"fit-content",textTransform:"capitalize","&:hover":{backgroundColor:e!=null&&e.value||b?"#0288D129":"#EEEDF4"},boxShadow:"none !important"},onClick:g,children:t.jsxs(te,{sx:{alignItems:"center","& .MuiBadge-dot":{bgcolor:"#C85A15"}},variant:"dot",children:[t.jsxs(w,{sx:{color:e!=null&&e.value||b?"#0288D1":"#0000008F",fontWeight:500,ml:.5},variant:"body2",children:[t.jsx(w,{sx:{fontWeight:600,mr:.5,color:e!=null&&e.value||b?void 0:"#0000008F",fontSize:"0.875rem"},component:"span",children:"Aa"}),t.jsxs(w,{sx:{mr:.5,display:"inline-flex",fontSize:"0.875rem"},children:[h," ",e!=null&&e.value||b?":":""]}),t.jsx(B,{sx:{maxWidth:"120px",display:"inline-flex"},children:t.jsx(w,{sx:{mr:.5,fontSize:"0.875rem",maxWidth:"120px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",textTransform:e!=null&&e.value&&(e==null?void 0:e.filterOption)!=="is empty"&&(e==null?void 0:e.filterOption)!=="is not empty"?"none":"capitalize"},component:"span",noWrap:!0,children:e!=null&&e.filterOption&&b?`${e==null?void 0:e.filterOption}`:e!=null&&e.value&&(e==null?void 0:e.value.length)>0?e.value:""})})]}),t.jsx(H,{sx:{color:e!=null&&e.value?"#0288D1":"#0000001F",ml:.5}})]})}),t.jsx(R,{anchorEl:r,open:!!r,onClose:S,anchorOrigin:{vertical:"bottom",horizontal:"left"},elevation:1,MenuListProps:{sx:{padding:0}},children:t.jsxs(V,{elevation:0,sx:{p:1,display:"flex",flexDirection:"column",gap:1,width:220,border:"1px solid #0000001F",borderRadius:"5px"},children:[t.jsx(ge,{filterField:h||void 0,field:(e==null?void 0:e.filterOption)||"contains",onSetField:I}),b?null:t.jsx(E,{autoFocus:!0,appearance:"distinct",placeholder:"Type a value...",size:"small",sx:{width:"100%","& .MuiInputBase-input":{padding:"4px 8px"}},FormControlProps:{sx:{width:"100%"}},onChange:x=>n(x.target.value),value:M})]})})]})};function ge({field:e,onSetField:a,filterField:p}){const{filterOptions:u}=o.useContext(z),[s,i]=o.useState(e);o.useEffect(()=>{i(e)},[e]);const c=d=>{i(d),a(d)},[h,m]=o.useState(null),r=u.findIndex(d=>d.value===s);return t.jsxs(oe,{sx:{flexDirection:"row",gap:1,alignItems:"center"},children:[t.jsx(w,{sx:{fontSize:"12px",color:"#0000001F",textTransform:"capitalize"},component:"span",children:p}),t.jsx(A,{value:s,onChange:c,onOpen:()=>m(r),FormControlProps:{sx:{width:"auto"}},MenuProps:{anchorOrigin:{vertical:20,horizontal:"center"},PaperProps:{sx:{...he.sx,border:"1px solid #0000001F",borderRadius:"5px","&:hover li.Mui-selected":{backgroundColor:"transparent"}},elevation:1}},sx:{fontSize:"12px !important",textTransform:"capitalize",width:"80px !important"},children:u.map((d,g)=>t.jsx(f,{value:d.value,onMouseEnter:()=>m(g),sx:{backgroundColor:h===g?"rgba(0, 0, 0, 0.04)":"transparent","&.Mui-selected":{backgroundColor:h===g?"rgba(0, 0, 0, 0.04)":"transparent"},"&.Mui-selected:hover":{backgroundColor:"rgba(0, 0, 0, 0.04) !important"},"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:t.jsx(F,{sx:{textTransform:"capitalize"},children:d.label})},d.value))})]})}se.__docgenInfo={description:"",methods:[],displayName:"DetailSelect"};export{se as D};
