import{i as Q,k as J,g as X,j as t,r as i}from"./iframe-NAPhPX1u.js";import{B as U}from"./button-CX41wHf2.js";import{K as V,T as A}from"./tiny-select-BnvDj24i.js";import{I as k}from"./input-CVkLqA4G.js";import{r as Y}from"./createSvgIcon-D0Rt455a.js";import{A as Z}from"./Add-C9lG2cpJ.js";import{D as ee}from"./Delete-DkmvgdWT.js";import{S as te}from"./SwapVert-DVOf-Tv-.js";import{B}from"./Box-DSk5b-S9.js";import{B as ne}from"./Badge-DNUy47J3.js";import{T as w}from"./Typography-PG28g8IJ.js";import{M as R,a as K}from"./Select-Cf1fb45c.js";import{P as N}from"./Paper-B2ewq_WJ.js";import{M as S}from"./MenuItem-BJ221rqE.js";import{L as P}from"./Tag-CN4K6U8Z.js";import{L as y}from"./ListItemText-DLUECCs6.js";import{S as oe}from"./Stack-CQ7BulZm.js";import{L as $}from"./ListSubheader-YUmCH3Mo.js";var z={},_;function ae(){if(_)return z;_=1;var e=Q();Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var a=e(Y()),x=J();return z.default=(0,a.default)((0,x.jsx)("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8z"}),"ArrowUpward"),z}var re=ae();const ie=X(re),O=i.createContext(void 0);function se(e){const[a,x]=i.useState("value"in e&&e.appearance==="filter"&&e.value?e.value:null),[u,s]=i.useState("value"in e&&e.appearance==="sort"&&e.value?e.value:[]),d={...e,filter:a,setFilter:x,sort:u,setSort:s,availableSortFields:"availableSortFields"in e?e.availableSortFields:[],filterOptions:"filterOptions"in e?e.filterOptions:[],open:e.open,valueSort:"value"in e&&e.appearance==="sort"?e.value:void 0,valueFilter:"value"in e&&e.appearance==="filter"?e.value:void 0,filterField:"field"in e&&e.appearance==="filter"?e.field:void 0,onCloseSort:"onClose"in e&&e.appearance==="sort"?e.onClose:void 0,onCloseFilter:"onClose"in e&&e.appearance==="filter"?e.onClose:void 0};return t.jsx(O.Provider,{value:d,children:e.children})}function le(e){return t.jsx(se,{...e,children:t.jsx(B,{sx:{display:"flex",flexDirection:"column",gap:1},children:t.jsx(de,{appearance:e.appearance})})})}const de=({appearance:e})=>e==="filter"?t.jsx(me,{}):t.jsx(ue,{}),G=()=>Math.random().toString(36).substring(2,15),H={sx:{maxHeight:"233px !important","& .MuiTypography-root":{fontSize:"0.875rem"},"& .MuiListItemIcon-root":{minWidth:"28px !important",svg:{width:"20px"}},"& .MuiButtonBase-root.MuiMenuItem-root ":{borderRadius:"4px"}}},ce={padding:0,maxHeight:"215px !important","& .MuiTypography-root":{fontSize:"0.875rem"},"& .MuiListItemIcon-root":{minWidth:"28px !important",svg:{width:"20px"}},"& .MuiButtonBase-root.MuiMenuItem-root ":{borderRadius:"4px"},"& .MuiMenuItem-root":{padding:"4px 8px"},"&":{padding:"8px 0"}};function ue(){const{sort:e,setSort:a,open:x,onChangeSort:u,onAddSort:s,onDeleteSort:d,onChangeSortOrder:c,availableSortFields:h,onCloseSort:p,valueSort:m}=i.useContext(O),[n,g]=i.useState(),[f,F]=i.useState(null),j=l=>g(l.currentTarget),M=()=>{g(null),p==null||p()},b=l=>F(l.currentTarget),r=()=>{F(null)},L=(l,v)=>{var T;a(I=>I.map(E=>E.field===v?{...E,field:l}:E)),u==null||u(l,((T=e.find(I=>I.field===v))==null?void 0:T.order)||"ascending",v)},D=(l,v)=>{a(T=>T.map(I=>I.field===v?{...I,order:l}:I)),c==null||c(v,l)},C=l=>{a(v=>[...v,{field:l,order:"ascending"}]),s==null||s(l),r()},o=()=>{a([]),d==null||d()},W=e.map(l=>l.field),q=G();return i.useEffect(()=>{const l=document.getElementById(q);x?l&&g(l):g(null)},[x]),i.useEffect(()=>{m&&a(m||[])},[a,m]),t.jsxs(t.Fragment,{children:[t.jsxs(U,{color:"info",id:q,sx:{backgroundColor:"#0288D114",borderRadius:"16px",display:"inline-flex",alignItems:"center",px:1.5,py:.5,width:"fit-content",textTransform:"capitalize","&:hover":{backgroundColor:"#0288D129"},boxShadow:"none !important"},onClick:j,children:[e.length>1?t.jsx(te,{sx:{fontSize:22,color:"#0288D1"}}):t.jsx(ie,{sx:{fontSize:18,color:"#0288D1"}}),t.jsx(w,{sx:{color:"#0288D1",fontWeight:500,ml:.5},variant:"body2",children:e.length===0?"Value":e.length===1?`${e[0].field}`:`${e.length} Sorts`}),t.jsx(V,{sx:{color:"#0288D1",ml:.5}})]}),t.jsx(R,{anchorEl:n,open:!!n,onClose:M,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:-5,horizontal:"left"},elevation:1,MenuListProps:{sx:{padding:0},"aria-labelledby":"menu-button"},children:t.jsxs(N,{elevation:0,sx:{p:"8px",display:"flex",flexDirection:"column",gap:1,width:220,border:"1px solid #0000001F",borderRadius:"5px"},children:[e.map((l,v)=>t.jsx(xe,{index:v,field:l.field,order:l.order,onSetField:L,onSetOrder:D,usedFields:W},v)),t.jsxs(K,{dense:!0,sx:{padding:0,"& .MuiMenuItem-root":{padding:"4px 8px",borderRadius:"4px"}},children:[e.length!==h.length?t.jsxs(S,{onClick:b,sx:{color:"text.disabled"},children:[t.jsx(P,{sx:{color:"text.disabled"},children:t.jsx(Z,{fontSize:"small"})}),t.jsx(y,{children:t.jsx(w,{variant:"body2",children:"Add sort"})})]}):null,e.length>0?t.jsxs(S,{sx:{color:"text.disabled"},onClick:o,disabled:e.length===0,children:[t.jsx(P,{sx:{color:"text.disabled"},children:t.jsx(ee,{fontSize:"small"})}),t.jsx(y,{children:t.jsx(w,{variant:"body2",children:"Delete sort"})})]}):null]})]})}),t.jsx(pe,{open:!!f,anchorEl:f,onClose:r,onAddSort:C,usedFields:W})]})}function xe({field:e,order:a,onSetField:x,onSetOrder:u,usedFields:s}){const{availableSortFields:d}=i.useContext(O),[c,h]=i.useState(e),[p,m]=i.useState(a);i.useEffect(()=>{h(e),m(a)},[e,a]);const n=r=>{h(r),x(r,c)},g=r=>{(r==="ascending"||r==="descending")&&(m(r),u(r,c))},[f,F]=i.useState(""),j=()=>{const r=setTimeout(()=>{F(""),clearTimeout(r)},150)},M=d.filter(r=>r.label.toLowerCase().includes(f.toLowerCase())&&!s.includes(r.value)),b=s.length===d.length;return t.jsxs(B,{sx:{display:"flex",gap:"2px"},children:[t.jsxs(A,{value:c,onChange:n,onClose:j,FormControlProps:{sx:{width:"auto"}},MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:8},MenuListProps:{sx:{padding:"8px 0"},autoFocusItem:!1},PaperProps:{sx:{...H.sx,border:"1px solid #0000001F",borderRadius:"5px"},elevation:1}},sx:{fontSize:"12px !important",textTransform:"capitalize"},children:[b?null:t.jsx($,{disableGutters:!0,sx:{lineHeight:"normal"},children:t.jsx(k,{autoFocus:!0,appearance:"distinct",placeholder:"Search For Property",size:"small",sx:{width:"100%","& .MuiInputBase-input":{padding:"4px 8px"}},FormControlProps:{sx:{width:"100%",mb:"4px"}},onKeyDown:r=>{r.stopPropagation()},onChange:r=>F(r.target.value),value:f})}),M.map(r=>s.includes(r.value)?null:t.jsxs(S,{value:r.value,disabled:s.includes(r.value)&&r.value!==e,children:[t.jsx(P,{children:r.icon}),t.jsx(y,{children:r.label})]},r.value)),M.length===0&&f!==""&&d.length>0&&t.jsx(S,{disabled:!0,children:t.jsx(y,{children:"No fields found"})}),b&&t.jsx(S,{disabled:!0,children:t.jsx(y,{children:"All Sorts are Applied"})})]}),t.jsxs(A,{value:p,onChange:g,FormControlProps:{sx:{width:"auto"}},MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:78},PaperProps:{sx:{...H.sx,border:"1px solid #0000001F",borderRadius:"5px"},elevation:1}},sx:{fontSize:"12px !important",width:"88px !important",textTransform:"capitalize"},children:[t.jsx(S,{value:"ascending",children:"Ascending"}),t.jsx(S,{value:"descending",children:"Descending"})]})]})}function pe({open:e,anchorEl:a,onClose:x,onAddSort:u,usedFields:s}){const{availableSortFields:d}=i.useContext(O),[c,h]=i.useState(""),p=d.filter(n=>n.label.toLowerCase().includes(c.toLowerCase())&&!s.includes(n.value)),m=()=>{x();const n=setTimeout(()=>{h(""),clearTimeout(n)},150)};return t.jsx(R,{open:e,onClose:m,anchorEl:a,MenuListProps:{disablePadding:!0,sx:{px:"4px"}},anchorOrigin:{vertical:"bottom",horizontal:-10},sx:{"& .MuiPaper-root":{width:"220px !important",border:"1px solid #0000001F",borderRadius:"5px"}},elevation:1,children:t.jsxs(K,{sx:ce,children:[t.jsx($,{disableGutters:!0,sx:{lineHeight:"normal"},children:t.jsx(k,{appearance:"distinct",placeholder:"Search For Property",size:"small",sx:{width:"100%","& .MuiInputBase-input":{padding:"4px 8px"}},FormControlProps:{sx:{width:"100%",mb:"4px"}},onKeyDown:n=>{n.stopPropagation()},onChange:n=>h(n.target.value),value:c})}),p.map(n=>s.includes(n.value)?null:t.jsxs(S,{onClick:()=>u(n.value),disabled:s.includes(n.value),children:[t.jsx(P,{children:n.icon}),t.jsx(y,{children:n.label})]},n.value)),p.length===0&&c!==""&&d.length>0&&t.jsx(S,{disabled:!0,children:t.jsx(y,{children:"No fields found"})})]})})}const he={sx:{maxHeight:"242px !important","& .MuiTypography-root":{fontSize:"0.875rem"},"& .MuiListItemIcon-root":{minWidth:"28px !important",svg:{width:"20px"}},"& .MuiButtonBase-root.MuiMenuItem-root ":{borderRadius:"4px"}}},me=()=>{const{filter:e,setFilter:a,open:x,onSetFilterValue:u,onClearFilter:s,onSetFilterOption:d,valueFilter:c,filterField:h,onCloseFilter:p}=i.useContext(O),[m,n]=i.useState(null),g=o=>n(o.currentTarget),f=()=>{n(null),p==null||p()},F=o=>{o==="is empty"||o==="is not empty"?(a({value:"",filterOption:o||"contains"}),M("")):a(()=>({value:(e==null?void 0:e.value)??"",filterOption:o||"contains"})),d==null||d(o)},[j,M]=i.useState((c==null?void 0:c.value)||""),[b,r]=i.useState(j);i.useEffect(()=>{const o=setTimeout(()=>{r(j)},500);return()=>clearTimeout(o)},[j]),i.useEffect(()=>{b===""?(a(o=>({value:"",filterOption:o!=null&&o.filterOption?o==null?void 0:o.filterOption:"contains"})),s==null||s()):(a(o=>({value:b||"",filterOption:(o==null?void 0:o.filterOption)??"contains"})),u==null||u(b))},[b]);const L=o=>{M(o)},D=G();i.useEffect(()=>{const o=document.getElementById(D);x?o&&n(o):n(null)},[x]);const C=(e==null?void 0:e.filterOption)==="is empty"||(e==null?void 0:e.filterOption)==="is not empty";return t.jsxs(t.Fragment,{children:[t.jsx(U,{color:"info",id:D,sx:{backgroundColor:e!=null&&e.value||C?"#0288D114":"transparent",borderRadius:"16px",display:"inline-flex",alignItems:"center",px:1.5,py:.5,width:"fit-content",textTransform:"capitalize","&:hover":{backgroundColor:e!=null&&e.value||C?"#0288D129":"#EEEDF4"},boxShadow:"none !important"},onClick:g,children:t.jsxs(ne,{sx:{alignItems:"center","& .MuiBadge-dot":{bgcolor:"#C85A15"}},variant:"dot",children:[t.jsxs(w,{sx:{color:e!=null&&e.value||C?"#0288D1":"#0000008F",fontWeight:500,ml:.5},variant:"body2",children:[t.jsx(w,{sx:{fontWeight:600,mr:.5,color:e!=null&&e.value||C?void 0:"#0000008F",fontSize:"0.875rem"},component:"span",children:"Aa"}),t.jsx(w,{sx:{mr:.5,display:"inline-flex",fontSize:"0.875rem","&::first-letter":{textTransform:"uppercase"}},children:ve({value:(e==null?void 0:e.value)??"",filterOption:(e==null?void 0:e.filterOption)??"",field:h})}),t.jsx(B,{sx:{maxWidth:"120px",display:"inline-flex"},children:t.jsx(w,{sx:{mr:.5,fontSize:"0.875rem",maxWidth:"120px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap","&::first-letter":{textTransform:e!=null&&e.value&&(e==null?void 0:e.filterOption)!=="is empty"&&(e==null?void 0:e.filterOption)!=="is not empty"?"none":"uppercase "}},component:"span",noWrap:!0,children:e!=null&&e.filterOption&&C?`${e==null?void 0:e.filterOption}`:e!=null&&e.value&&(e==null?void 0:e.value.length)>0?e.value:""})})]}),t.jsx(V,{sx:{color:e!=null&&e.value?"#0288D1":"#0000001F",ml:.5}})]})}),t.jsx(R,{anchorEl:m,open:!!m,onClose:f,anchorOrigin:{vertical:"bottom",horizontal:"left"},elevation:1,MenuListProps:{sx:{padding:0}},children:t.jsxs(N,{elevation:0,sx:{p:1,display:"flex",flexDirection:"column",gap:1,width:220,border:"1px solid #0000001F",borderRadius:"5px"},children:[t.jsx(ge,{filterField:h||void 0,field:(e==null?void 0:e.filterOption)||"contains",onSetField:F}),C?null:t.jsx(k,{autoFocus:!0,appearance:"distinct",placeholder:"Type a value...",size:"small",sx:{width:"100%","& .MuiInputBase-input":{padding:"4px 8px"}},FormControlProps:{sx:{width:"100%"}},onChange:o=>L(o.target.value),value:j})]})})]})};function ge({field:e,onSetField:a,filterField:x}){const{filterOptions:u}=i.useContext(O),[s,d]=i.useState(e);i.useEffect(()=>{d(e)},[e]);const c=n=>{d(n),a(n)},[h,p]=i.useState(null),m=u.findIndex(n=>n.value===s);return t.jsxs(oe,{sx:{flexDirection:"row",gap:1,alignItems:"center"},children:[t.jsx(w,{sx:{fontSize:"12px",color:"#0000001F",textTransform:"capitalize"},component:"span",children:x}),t.jsx(A,{value:s,onChange:c,onOpen:()=>p(m),FormControlProps:{sx:{width:"auto"}},MenuProps:{anchorOrigin:{vertical:30,horizontal:"center"},PaperProps:{sx:{...he.sx,border:"1px solid #0000001F",borderRadius:"5px","&:hover li.Mui-selected":{backgroundColor:"transparent"}},elevation:1}},sx:{fontSize:"12px !important",textTransform:"capitalize",minWidth:"80px !important",maxWidth:"130px !important",width:"auto !important"},children:u.map((n,g)=>t.jsx(S,{value:n.value,onMouseEnter:()=>p(g),sx:{backgroundColor:h===g?"rgba(0, 0, 0, 0.04)":"transparent","&.Mui-selected":{backgroundColor:h===g?"rgba(0, 0, 0, 0.04)":"transparent"},"&.Mui-selected:hover":{backgroundColor:"rgba(0, 0, 0, 0.04) !important"},"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:t.jsx(y,{sx:{textTransform:"capitalize"},children:n.label})},n.value))})]})}const ve=e=>{let a="";switch(e==null?void 0:e.filterOption){case"starts with":a="starts with ";break;case"ends with":a="ends with ";break;case"does not contain":case"is not":a="not ";break;default:a="";break}return t.jsxs(t.Fragment,{children:[e==null?void 0:e.field,e!=null&&e.value&&e!=null&&e.filterOption?` : ${a}`:""]})};le.__docgenInfo={description:"",methods:[],displayName:"DetailSelect"};export{le as D};
