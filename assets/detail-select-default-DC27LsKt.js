import{i as $,k as G,g as J,j as t,r as n}from"./iframe-Bv6dwyi6.js";import{B as _}from"./button-DjDMlC5L.js";import{K as U,T}from"./tiny-select-Bz48zSUh.js";import{I as A}from"./input-JQg3Uu4n.js";import{r as Q}from"./createSvgIcon-CKdMn4wO.js";import{A as X}from"./Add-wXW7rx43.js";import{D as Y}from"./Delete-BB7olYF3.js";import{S as Z}from"./SwapVert-DitooL-c.js";import{B as E}from"./Box-BzyrmKLH.js";import{B as ee}from"./Badge-oZGx0qmT.js";import{T as w}from"./Typography-YZ__YNto.js";import{M as B,a as H}from"./Select-DgVd0jcT.js";import{P as K}from"./Paper-CpZCUC_L.js";import{M as g}from"./MenuItem-9FrNM_dI.js";import{L as O}from"./Tag-I7Pj7mF6.js";import{L as F}from"./ListItemText-Cl69ImRH.js";import{S as te}from"./Stack-BfX3vPkc.js";import{L as oe}from"./ListSubheader-DJmiDozX.js";var D={},W;function ne(){if(W)return D;W=1;var e=$();Object.defineProperty(D,"__esModule",{value:!0}),D.default=void 0;var a=e(Q()),x=G();return D.default=(0,a.default)((0,x.jsx)("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8z"}),"ArrowUpward"),D}var re=ne();const ae=J(re),z=n.createContext(void 0);function ie(e){const[a,x]=n.useState(null),[p,s]=n.useState([]),i={...e,filter:a,setFilter:x,sort:p,setSort:s,availableSortFields:"availableSortFields"in e?e.availableSortFields:[],filterOptions:"filterOptions"in e?e.filterOptions:[],open:e.open,valueSort:"value"in e&&e.appearance==="sort"?e.value:void 0,valueFilter:"value"in e&&e.appearance==="filter"?e.value:void 0,filterField:"field"in e&&e.appearance==="filter"?e.field:void 0};return t.jsx(z.Provider,{value:i,children:e.children})}function le(e){return t.jsx(ie,{...e,children:t.jsx(E,{sx:{display:"flex",flexDirection:"column",gap:1},children:t.jsx(se,{appearance:e.appearance})})})}const se=({appearance:e})=>e==="filter"?t.jsx(he,{}):t.jsx(ce,{}),V=()=>Math.random().toString(36).substring(2,15),q={sx:{maxHeight:"233px !important","& .MuiTypography-root":{fontSize:"0.875rem"},"& .MuiListItemIcon-root":{minWidth:"28px !important",svg:{width:"20px"}},"& .MuiButtonBase-root.MuiMenuItem-root ":{borderRadius:"4px"}}},de={padding:0,maxHeight:"215px !important","& .MuiTypography-root":{fontSize:"0.875rem"},"& .MuiListItemIcon-root":{minWidth:"28px !important",svg:{width:"20px"}},"& .MuiButtonBase-root.MuiMenuItem-root ":{borderRadius:"4px"},"& .MuiMenuItem-root":{padding:"4px 8px"},"&":{padding:"8px 0"}};function ce(){const{sort:e,setSort:a,open:x,onChangeSort:p,onAddSort:s,onDeleteSort:i,onChangeSortOrder:c,availableSortFields:d,valueSort:m}=n.useContext(z),[r,j]=n.useState(),[I,f]=n.useState(null),C=l=>j(l.currentTarget),b=()=>j(null),M=l=>f(l.currentTarget),o=()=>f(null),v=(l,h)=>{var P;a(y=>y.map(L=>L.field===h?{...L,field:l}:L)),p==null||p(l,((P=e.find(y=>y.field===h))==null?void 0:P.order)||"ascending",h)},u=(l,h)=>{a(P=>P.map(y=>y.field===h?{...y,order:l}:y)),c==null||c(h,l)},S=l=>{a(h=>[...h,{field:l,order:"ascending"}]),s==null||s(l),e.length===d.length-1&&o()},N=()=>{a([]),i==null||i()},R=e.map(l=>l.field),k=V();return n.useEffect(()=>{const l=document.getElementById(k);x?l&&j(l):j(null)},[x]),n.useEffect(()=>{a(m||[])},[m]),t.jsxs(t.Fragment,{children:[t.jsxs(_,{color:"info",id:k,sx:{backgroundColor:"#0288D114",borderRadius:"16px",display:"inline-flex",alignItems:"center",px:1.5,py:.5,width:"fit-content",textTransform:"capitalize","&:hover":{backgroundColor:"#0288D129"},boxShadow:"none !important"},onClick:C,children:[e.length>1?t.jsx(Z,{sx:{fontSize:22,color:"#0288D1"}}):t.jsx(ae,{sx:{fontSize:18,color:"#0288D1"}}),t.jsx(w,{sx:{color:"#0288D1",fontWeight:500,ml:.5},variant:"body2",children:e.length===0?"Value":e.length===1?`${e[0].field}`:`${e.length} Sorts`}),t.jsx(U,{sx:{color:"#0288D1",ml:.5}})]}),t.jsx(B,{anchorEl:r,open:!!r,onClose:b,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:-5,horizontal:"left"},elevation:1,MenuListProps:{sx:{padding:0},"aria-labelledby":"menu-button"},children:t.jsxs(K,{elevation:0,sx:{p:"8px",display:"flex",flexDirection:"column",gap:1,width:220,border:"1px solid #0000001F",borderRadius:"5px"},children:[e.map((l,h)=>t.jsx(ue,{index:h,field:l.field,order:l.order,onSetField:v,onSetOrder:u,usedFields:R},h)),t.jsxs(H,{dense:!0,sx:{padding:0,"& .MuiMenuItem-root":{padding:"4px 8px",borderRadius:"4px"}},children:[e.length!==d.length?t.jsxs(g,{onClick:M,sx:{color:"text.disabled"},children:[t.jsx(O,{sx:{color:"text.disabled"},children:t.jsx(X,{fontSize:"small"})}),t.jsx(F,{children:t.jsx(w,{variant:"body2",children:"Add sort"})})]}):null,e.length>0?t.jsxs(g,{sx:{color:"text.disabled"},onClick:N,disabled:e.length===0,children:[t.jsx(O,{sx:{color:"text.disabled"},children:t.jsx(Y,{fontSize:"small"})}),t.jsx(F,{children:t.jsx(w,{variant:"body2",children:"Delete sort"})})]}):null]})]})}),t.jsx(xe,{open:!!I,anchorEl:I,onClose:o,onAddSort:S,usedFields:R})]})}function ue({field:e,order:a,onSetField:x,onSetOrder:p,usedFields:s}){const{availableSortFields:i}=n.useContext(z),[c,d]=n.useState(e),[m,r]=n.useState(a);n.useEffect(()=>{d(e),r(a)},[e,a]);const j=o=>{d(o),x(o,c)},I=o=>{(o==="ascending"||o==="descending")&&(r(o),p(o,c))},[f,C]=n.useState("");n.useEffect(()=>{f!==""&&C("")},[]);const b=i.filter(o=>o.label.toLowerCase().includes(f.toLowerCase())),M=s.length===i.length;return t.jsxs(E,{sx:{display:"flex",gap:"2px"},children:[t.jsxs(T,{value:c,onChange:j,FormControlProps:{sx:{width:"auto"}},MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:8},MenuListProps:{sx:{padding:"8px 0"},autoFocusItem:!1},PaperProps:{sx:{...q.sx,border:"1px solid #0000001F",borderRadius:"5px"},elevation:1}},sx:{fontSize:"12px !important",textTransform:"capitalize"},children:[M?null:t.jsx(oe,{disableGutters:!0,sx:{lineHeight:"normal"},children:t.jsx(A,{appearance:"distinct",placeholder:"Search For Property",size:"small",sx:{width:"100%","& .MuiInputBase-input":{padding:"4px 8px"}},FormControlProps:{sx:{width:"100%",mb:"4px"}},onKeyDown:o=>{o.stopPropagation()},onChange:o=>C(o.target.value),value:f})}),b.map(o=>s.includes(o.value)?null:t.jsxs(g,{value:o.value,disabled:s.includes(o.value)&&o.value!==e,children:[t.jsx(O,{children:o.icon}),t.jsx(F,{children:o.label})]},o.value)),b.length===0&&f!==""&&i.length>0&&t.jsx(g,{disabled:!0,children:t.jsx(F,{children:"No fields found"})}),M&&t.jsx(g,{disabled:!0,children:t.jsx(F,{children:"All Sorts are Applied"})})]}),t.jsxs(T,{value:m,onChange:I,FormControlProps:{sx:{width:"auto"}},MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:78},PaperProps:{sx:{...q.sx,border:"1px solid #0000001F",borderRadius:"5px"},elevation:1}},sx:{fontSize:"12px !important",width:"88px !important",textTransform:"capitalize"},children:[t.jsx(g,{value:"ascending",children:"Ascending"}),t.jsx(g,{value:"descending",children:"Descending"})]})]})}function xe({open:e,anchorEl:a,onClose:x,onAddSort:p,usedFields:s}){const[i,c]=n.useState(""),{availableSortFields:d}=n.useContext(z),m=d.filter(r=>r.label.toLowerCase().includes(i.toLowerCase()));return t.jsx(B,{open:e,onClose:x,anchorEl:a,MenuListProps:{disablePadding:!0,sx:{px:"4px"}},anchorOrigin:{vertical:"bottom",horizontal:-10},sx:{"& .MuiPaper-root":{width:"220px !important",border:"1px solid #0000001F",borderRadius:"5px"}},elevation:1,disableAutoFocusItem:!0,children:t.jsxs(H,{sx:de,autoFocusItem:!1,children:[t.jsx(A,{autoFocus:!0,appearance:"distinct",placeholder:"Search For Property",size:"small",sx:{width:"100%","& .MuiInputBase-input":{padding:"4px 8px"}},FormControlProps:{sx:{width:"100%",mb:"4px"}},onKeyDown:r=>{r.stopPropagation()},onChange:r=>c(r.target.value),value:i}),m.map(r=>s.includes(r.value)?null:t.jsxs(g,{onClick:()=>p(r.value),disabled:s.includes(r.value),children:[t.jsx(O,{children:r.icon}),t.jsx(F,{children:r.label})]},r.value)),m.length===0&&i!==""&&d.length>0&&t.jsx(g,{disabled:!0,children:t.jsx(F,{children:"No fields found"})})]})})}const pe={sx:{maxHeight:"242px !important","& .MuiTypography-root":{fontSize:"0.875rem"},"& .MuiListItemIcon-root":{minWidth:"28px !important",svg:{width:"20px"}},"& .MuiButtonBase-root.MuiMenuItem-root ":{borderRadius:"4px"}}},he=()=>{const{filter:e,setFilter:a,open:x,onSetFilterValue:p,onClearFilter:s,onSetFilterOption:i,valueFilter:c,filterField:d}=n.useContext(z),[m,r]=n.useState(null),j=u=>r(u.currentTarget),I=()=>r(null),f=u=>{a(S=>({value:(S==null?void 0:S.value)??"",filterOption:u||"contains"})),i==null||i(u)},[C,b]=n.useState((e==null?void 0:e.value)||"");n.useEffect(()=>{C!==""&&b("")},[]);const M=u=>{b(u),u===""?(a(null),s==null||s()):(a(S=>({value:u||"",filterOption:(S==null?void 0:S.filterOption)??"contains"})),p==null||p(u))},o=V();n.useEffect(()=>{const u=document.getElementById(o);x?u&&r(u):r(null)},[x]),n.useEffect(()=>{a(c||null),b((c==null?void 0:c.value)||"")},[c]);const v=(e==null?void 0:e.filterOption)==="is empty"||(e==null?void 0:e.filterOption)==="is not empty";return t.jsxs(t.Fragment,{children:[t.jsx(_,{color:"info",id:o,sx:{backgroundColor:e!=null&&e.value||v?"#0288D114":"transparent",borderRadius:"16px",display:"inline-flex",alignItems:"center",px:1.5,py:.5,width:"fit-content",textTransform:"capitalize","&:hover":{backgroundColor:e!=null&&e.value||v?"#0288D129":"#EEEDF4"},boxShadow:"none !important"},onClick:j,children:t.jsxs(ee,{color:"error",variant:"dot",sx:{alignItems:"center"},children:[t.jsxs(w,{sx:{color:e!=null&&e.value||v?"#0288D1":"#0000008F",fontWeight:500,ml:.5},variant:"body2",children:[t.jsx(w,{sx:{fontWeight:600,mr:.5,color:e!=null&&e.value||v?void 0:"#0000008F",fontSize:"0.875rem"},component:"span",children:"Aa"}),t.jsxs(w,{sx:{mr:.5,display:"inline-flex",fontSize:"0.875rem"},children:[d," ",e!=null&&e.value||v?":":""]}),t.jsx(E,{sx:{maxWidth:"120px",display:"inline-flex"},children:t.jsx(w,{sx:{mr:.5,fontSize:"0.875rem",maxWidth:"120px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",textTransform:e!=null&&e.value&&(e==null?void 0:e.filterOption)!=="is empty"&&(e==null?void 0:e.filterOption)!=="is not empty"?"none":"capitalize"},component:"span",noWrap:!0,children:e!=null&&e.filterOption&&v?`${e==null?void 0:e.filterOption}`:e!=null&&e.value&&(e==null?void 0:e.value.length)>0?e.value:""})})]}),t.jsx(U,{sx:{color:e!=null&&e.value?"#0288D1":"#0000001F",ml:.5}})]})}),t.jsx(B,{anchorEl:m,open:!!m,onClose:I,anchorOrigin:{vertical:"bottom",horizontal:"left"},elevation:1,MenuListProps:{sx:{padding:0}},children:t.jsxs(K,{elevation:0,sx:{p:1,display:"flex",flexDirection:"column",gap:1,width:220,border:"1px solid #0000001F",borderRadius:"5px"},children:[t.jsx(me,{filterField:d||void 0,field:(e==null?void 0:e.filterOption)||"contains",onSetField:f}),v?null:t.jsx(A,{appearance:"distinct",placeholder:"Type a value...",size:"small",sx:{width:"100%","& .MuiInputBase-input":{padding:"4px 8px"}},FormControlProps:{sx:{width:"100%"}},onChange:u=>M(u.target.value),value:C})]})})]})};function me({field:e,onSetField:a,filterField:x}){const{filterOptions:p}=n.useContext(z),[s,i]=n.useState(e);n.useEffect(()=>{i(e)},[e]);const c=d=>{i(d),a(d)};return t.jsxs(te,{sx:{flexDirection:"row",gap:1,alignItems:"center"},children:[t.jsx(w,{sx:{fontSize:"12px",color:"#0000001F",textTransform:"capitalize"},component:"span",children:x}),t.jsx(T,{value:s,onChange:c,FormControlProps:{sx:{width:"auto"}},MenuProps:{anchorOrigin:{vertical:20,horizontal:"center"},PaperProps:{sx:{...pe.sx,border:"1px solid #0000001F",borderRadius:"5px"},elevation:1}},sx:{fontSize:"12px !important",textTransform:"capitalize",width:"80px !important"},children:p.map(d=>t.jsx(g,{value:d.value,children:t.jsx(F,{sx:{textTransform:"capitalize"},children:d.label})},d.value))})]})}le.__docgenInfo={description:"",methods:[],displayName:"DetailSelect"};export{le as D};
