import{i as G,k as J,g as Q,j as t,r}from"./iframe-BOEgomFY.js";import{B as U}from"./button-n0liwBoJ.js";import{K as H,T as A}from"./tiny-select-xRRZWEFK.js";import{I as E}from"./input-8YHcm5ti.js";import{r as X}from"./createSvgIcon-LsRAuJTe.js";import{A as Y}from"./Add-TB_9c5FD.js";import{D as Z}from"./Delete-CI8CsQVk.js";import{S as ee}from"./SwapVert-BwgJ_U4F.js";import{B as k}from"./Box-CK-R1Q0_.js";import{B as te}from"./Badge-CctqCfSM.js";import{T as w}from"./Typography-CgdaMjzI.js";import{M as B,a as V}from"./Select-tTbiwVb4.js";import{P as K}from"./Paper-AT6iWgtF.js";import{M as f}from"./MenuItem-DNZf9Anj.js";import{L as T}from"./Tag-B6UNhHpC.js";import{L as C}from"./ListItemText-oxz9E3z3.js";import{S as ne}from"./Stack-Cc11et4g.js";import{L as oe}from"./ListSubheader-DMGyXe1C.js";var D={},q;function ae(){if(q)return D;q=1;var e=G();Object.defineProperty(D,"__esModule",{value:!0}),D.default=void 0;var n=e(X()),x=J();return D.default=(0,n.default)((0,x.jsx)("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8z"}),"ArrowUpward"),D}var re=ae();const ie=Q(re),O=r.createContext(void 0);function se(e){const[n,x]=r.useState("value"in e&&e.appearance==="filter"&&e.value?e.value:null),[u,d]=r.useState("value"in e&&e.appearance==="sort"&&e.value?e.value:[]),s={...e,filter:n,setFilter:x,sort:u,setSort:d,availableSortFields:"availableSortFields"in e?e.availableSortFields:[],filterOptions:"filterOptions"in e?e.filterOptions:[],open:e.open,valueSort:"value"in e&&e.appearance==="sort"?e.value:void 0,valueFilter:"value"in e&&e.appearance==="filter"?e.value:void 0,filterField:"field"in e&&e.appearance==="filter"?e.field:void 0,onCloseSort:"onClose"in e&&e.appearance==="sort"?e.onClose:void 0,onCloseFilter:"onClose"in e&&e.appearance==="filter"?e.onClose:void 0};return t.jsx(O.Provider,{value:s,children:e.children})}function le(e){return t.jsx(se,{...e,children:t.jsx(k,{sx:{display:"flex",flexDirection:"column",gap:1},children:t.jsx(de,{appearance:e.appearance})})})}const de=({appearance:e})=>e==="filter"?t.jsx(me,{}):t.jsx(ue,{}),N=()=>Math.random().toString(36).substring(2,15),_={sx:{maxHeight:"233px !important","& .MuiTypography-root":{fontSize:"0.875rem"},"& .MuiListItemIcon-root":{minWidth:"28px !important",svg:{width:"20px"}},"& .MuiButtonBase-root.MuiMenuItem-root ":{borderRadius:"4px"}}},ce={padding:0,maxHeight:"215px !important","& .MuiTypography-root":{fontSize:"0.875rem"},"& .MuiListItemIcon-root":{minWidth:"28px !important",svg:{width:"20px"}},"& .MuiButtonBase-root.MuiMenuItem-root ":{borderRadius:"4px"},"& .MuiMenuItem-root":{padding:"4px 8px"},"&":{padding:"8px 0"}};function ue(){const{sort:e,setSort:n,open:x,onChangeSort:u,onAddSort:d,onDeleteSort:s,onChangeSortOrder:p,availableSortFields:m,onCloseSort:h,valueSort:a}=r.useContext(O),[c,g]=r.useState(),[b,F]=r.useState(null),M=l=>g(l.currentTarget),y=()=>{g(null),h==null||h()},o=l=>F(l.currentTarget),z=()=>{F(null)},j=(l,S)=>{var P;n(I=>I.map(L=>L.field===S?{...L,field:l}:L)),u==null||u(l,((P=e.find(I=>I.field===S))==null?void 0:P.order)||"ascending",S)},i=(l,S)=>{n(P=>P.map(I=>I.field===S?{...I,order:l}:I)),p==null||p(S,l)},v=l=>{n(S=>[...S,{field:l,order:"ascending"}]),d==null||d(l),e.length===m.length-1&&z()},$=()=>{n([]),s==null||s()},R=e.map(l=>l.field),W=N();return r.useEffect(()=>{const l=document.getElementById(W);x?l&&g(l):g(null)},[x]),r.useEffect(()=>{a&&n(a||[])},[n,a]),t.jsxs(t.Fragment,{children:[t.jsxs(U,{color:"info",id:W,sx:{backgroundColor:"#0288D114",borderRadius:"16px",display:"inline-flex",alignItems:"center",px:1.5,py:.5,width:"fit-content",textTransform:"capitalize","&:hover":{backgroundColor:"#0288D129"},boxShadow:"none !important"},onClick:M,children:[e.length>1?t.jsx(ee,{sx:{fontSize:22,color:"#0288D1"}}):t.jsx(ie,{sx:{fontSize:18,color:"#0288D1"}}),t.jsx(w,{sx:{color:"#0288D1",fontWeight:500,ml:.5},variant:"body2",children:e.length===0?"Value":e.length===1?`${e[0].field}`:`${e.length} Sorts`}),t.jsx(H,{sx:{color:"#0288D1",ml:.5}})]}),t.jsx(B,{anchorEl:c,open:!!c,onClose:y,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:-5,horizontal:"left"},elevation:1,MenuListProps:{sx:{padding:0},"aria-labelledby":"menu-button"},children:t.jsxs(K,{elevation:0,sx:{p:"8px",display:"flex",flexDirection:"column",gap:1,width:220,border:"1px solid #0000001F",borderRadius:"5px"},children:[e.map((l,S)=>t.jsx(xe,{index:S,field:l.field,order:l.order,onSetField:j,onSetOrder:i,usedFields:R},S)),t.jsxs(V,{dense:!0,sx:{padding:0,"& .MuiMenuItem-root":{padding:"4px 8px",borderRadius:"4px"}},children:[e.length!==m.length?t.jsxs(f,{onClick:o,sx:{color:"text.disabled"},children:[t.jsx(T,{sx:{color:"text.disabled"},children:t.jsx(Y,{fontSize:"small"})}),t.jsx(C,{children:t.jsx(w,{variant:"body2",children:"Add sort"})})]}):null,e.length>0?t.jsxs(f,{sx:{color:"text.disabled"},onClick:$,disabled:e.length===0,children:[t.jsx(T,{sx:{color:"text.disabled"},children:t.jsx(Z,{fontSize:"small"})}),t.jsx(C,{children:t.jsx(w,{variant:"body2",children:"Delete sort"})})]}):null]})]})}),t.jsx(pe,{open:!!b,anchorEl:b,onClose:z,onAddSort:v,usedFields:R})]})}function xe({field:e,order:n,onSetField:x,onSetOrder:u,usedFields:d}){const{availableSortFields:s}=r.useContext(O),[p,m]=r.useState(e),[h,a]=r.useState(n);r.useEffect(()=>{m(e),a(n)},[e,n]);const c=o=>{m(o),x(o,p)},g=o=>{(o==="ascending"||o==="descending")&&(a(o),u(o,p))},[b,F]=r.useState("");r.useEffect(()=>{b!==""&&F("")},[]);const M=s.filter(o=>o.label.toLowerCase().includes(b.toLowerCase())),y=d.length===s.length;return t.jsxs(k,{sx:{display:"flex",gap:"2px"},children:[t.jsxs(A,{value:p,onChange:c,FormControlProps:{sx:{width:"auto"}},MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:8},MenuListProps:{sx:{padding:"8px 0"},autoFocusItem:!1},PaperProps:{sx:{..._.sx,border:"1px solid #0000001F",borderRadius:"5px"},elevation:1}},sx:{fontSize:"12px !important",textTransform:"capitalize"},children:[y?null:t.jsx(oe,{disableGutters:!0,sx:{lineHeight:"normal"},children:t.jsx(E,{appearance:"distinct",placeholder:"Search For Property",size:"small",sx:{width:"100%","& .MuiInputBase-input":{padding:"4px 8px"}},FormControlProps:{sx:{width:"100%",mb:"4px"}},onKeyDown:o=>{o.stopPropagation()},onChange:o=>F(o.target.value),value:b})}),M.map(o=>d.includes(o.value)?null:t.jsxs(f,{value:o.value,disabled:d.includes(o.value)&&o.value!==e,children:[t.jsx(T,{children:o.icon}),t.jsx(C,{children:o.label})]},o.value)),M.length===0&&b!==""&&s.length>0&&t.jsx(f,{disabled:!0,children:t.jsx(C,{children:"No fields found"})}),y&&t.jsx(f,{disabled:!0,children:t.jsx(C,{children:"All Sorts are Applied"})})]}),t.jsxs(A,{value:h,onChange:g,FormControlProps:{sx:{width:"auto"}},MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:78},PaperProps:{sx:{..._.sx,border:"1px solid #0000001F",borderRadius:"5px"},elevation:1}},sx:{fontSize:"12px !important",width:"88px !important",textTransform:"capitalize"},children:[t.jsx(f,{value:"ascending",children:"Ascending"}),t.jsx(f,{value:"descending",children:"Descending"})]})]})}function pe({open:e,anchorEl:n,onClose:x,onAddSort:u,usedFields:d}){const[s,p]=r.useState(""),{availableSortFields:m}=r.useContext(O),h=m.filter(a=>a.label.toLowerCase().includes(s.toLowerCase()));return t.jsx(B,{open:e,onClose:x,anchorEl:n,MenuListProps:{disablePadding:!0,sx:{px:"4px"}},anchorOrigin:{vertical:"bottom",horizontal:-10},sx:{"& .MuiPaper-root":{width:"220px !important",border:"1px solid #0000001F",borderRadius:"5px"}},elevation:1,disableAutoFocusItem:!0,children:t.jsxs(V,{sx:ce,autoFocusItem:!1,children:[t.jsx(E,{autoFocus:!0,appearance:"distinct",placeholder:"Search For Property",size:"small",sx:{width:"100%","& .MuiInputBase-input":{padding:"4px 8px"}},FormControlProps:{sx:{width:"100%",mb:"4px"}},onKeyDown:a=>{a.stopPropagation()},onChange:a=>p(a.target.value),value:s}),h.map(a=>d.includes(a.value)?null:t.jsxs(f,{onClick:()=>u(a.value),disabled:d.includes(a.value),children:[t.jsx(T,{children:a.icon}),t.jsx(C,{children:a.label})]},a.value)),h.length===0&&s!==""&&m.length>0&&t.jsx(f,{disabled:!0,children:t.jsx(C,{children:"No fields found"})})]})})}const he={sx:{maxHeight:"242px !important","& .MuiTypography-root":{fontSize:"0.875rem"},"& .MuiListItemIcon-root":{minWidth:"28px !important",svg:{width:"20px"}},"& .MuiButtonBase-root.MuiMenuItem-root ":{borderRadius:"4px"}}},me=()=>{const{filter:e,setFilter:n,open:x,onSetFilterValue:u,onClearFilter:d,onSetFilterOption:s,valueFilter:p,filterField:m,onCloseFilter:h}=r.useContext(O),[a,c]=r.useState(null),g=i=>c(i.currentTarget),b=()=>{c(null),h==null||h()},F=i=>{i==="is empty"||i==="is not empty"?(n({value:"",filterOption:i||"contains"}),y("")):n(()=>({value:(e==null?void 0:e.value)??"",filterOption:i||"contains"})),s==null||s(i)},[M,y]=r.useState((p==null?void 0:p.value)||""),o=i=>{y(i),i===""?(n(v=>({value:"",filterOption:v!=null&&v.filterOption?v==null?void 0:v.filterOption:"contains"})),d==null||d()):(n(v=>({value:i||"",filterOption:(v==null?void 0:v.filterOption)??"contains"})),u==null||u(i))},z=N();r.useEffect(()=>{const i=document.getElementById(z);x?i&&c(i):c(null)},[x]);const j=(e==null?void 0:e.filterOption)==="is empty"||(e==null?void 0:e.filterOption)==="is not empty";return t.jsxs(t.Fragment,{children:[t.jsx(U,{color:"info",id:z,sx:{backgroundColor:e!=null&&e.value||j?"#0288D114":"transparent",borderRadius:"16px",display:"inline-flex",alignItems:"center",px:1.5,py:.5,width:"fit-content",textTransform:"capitalize","&:hover":{backgroundColor:e!=null&&e.value||j?"#0288D129":"#EEEDF4"},boxShadow:"none !important"},onClick:g,children:t.jsxs(te,{sx:{alignItems:"center","& .MuiBadge-dot":{bgcolor:"#C85A15"}},variant:"dot",children:[t.jsxs(w,{sx:{color:e!=null&&e.value||j?"#0288D1":"#0000008F",fontWeight:500,ml:.5},variant:"body2",children:[t.jsx(w,{sx:{fontWeight:600,mr:.5,color:e!=null&&e.value||j?void 0:"#0000008F",fontSize:"0.875rem"},component:"span",children:"Aa"}),t.jsx(w,{sx:{mr:.5,display:"inline-flex",fontSize:"0.875rem","&::first-letter":{textTransform:"uppercase"}},children:ve({value:(e==null?void 0:e.value)??"",filterOption:(e==null?void 0:e.filterOption)??"",field:m})}),t.jsx(k,{sx:{maxWidth:"120px",display:"inline-flex"},children:t.jsx(w,{sx:{mr:.5,fontSize:"0.875rem",maxWidth:"120px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap","&::first-letter":{textTransform:e!=null&&e.value&&(e==null?void 0:e.filterOption)!=="is empty"&&(e==null?void 0:e.filterOption)!=="is not empty"?"none":"uppercase "}},component:"span",noWrap:!0,children:e!=null&&e.filterOption&&j?`${e==null?void 0:e.filterOption}`:e!=null&&e.value&&(e==null?void 0:e.value.length)>0?e.value:""})})]}),t.jsx(H,{sx:{color:e!=null&&e.value?"#0288D1":"#0000001F",ml:.5}})]})}),t.jsx(B,{anchorEl:a,open:!!a,onClose:b,anchorOrigin:{vertical:"bottom",horizontal:"left"},elevation:1,MenuListProps:{sx:{padding:0}},children:t.jsxs(K,{elevation:0,sx:{p:1,display:"flex",flexDirection:"column",gap:1,width:220,border:"1px solid #0000001F",borderRadius:"5px"},children:[t.jsx(ge,{filterField:m||void 0,field:(e==null?void 0:e.filterOption)||"contains",onSetField:F}),j?null:t.jsx(E,{autoFocus:!0,appearance:"distinct",placeholder:"Type a value...",size:"small",sx:{width:"100%","& .MuiInputBase-input":{padding:"4px 8px"}},FormControlProps:{sx:{width:"100%"}},onChange:i=>o(i.target.value),value:M})]})})]})};function ge({field:e,onSetField:n,filterField:x}){const{filterOptions:u}=r.useContext(O),[d,s]=r.useState(e);r.useEffect(()=>{s(e)},[e]);const p=c=>{s(c),n(c)},[m,h]=r.useState(null),a=u.findIndex(c=>c.value===d);return t.jsxs(ne,{sx:{flexDirection:"row",gap:1,alignItems:"center"},children:[t.jsx(w,{sx:{fontSize:"12px",color:"#0000001F",textTransform:"capitalize"},component:"span",children:x}),t.jsx(A,{value:d,onChange:p,onOpen:()=>h(a),FormControlProps:{sx:{width:"auto"}},MenuProps:{anchorOrigin:{vertical:30,horizontal:"center"},PaperProps:{sx:{...he.sx,border:"1px solid #0000001F",borderRadius:"5px","&:hover li.Mui-selected":{backgroundColor:"transparent"}},elevation:1}},sx:{fontSize:"12px !important",textTransform:"capitalize",minWidth:"80px !important",maxWidth:"130px !important",width:"auto !important"},children:u.map((c,g)=>t.jsx(f,{value:c.value,onMouseEnter:()=>h(g),sx:{backgroundColor:m===g?"rgba(0, 0, 0, 0.04)":"transparent","&.Mui-selected":{backgroundColor:m===g?"rgba(0, 0, 0, 0.04)":"transparent"},"&.Mui-selected:hover":{backgroundColor:"rgba(0, 0, 0, 0.04) !important"},"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:t.jsx(C,{sx:{textTransform:"capitalize"},children:c.label})},c.value))})]})}const ve=e=>{let n="";switch(e==null?void 0:e.filterOption){case"starts with":n="starts with ";break;case"ends with":n="ends with ";break;case"does not contain":case"is not":n="not ";break;default:n="";break}return t.jsxs(t.Fragment,{children:[e==null?void 0:e.field,e!=null&&e.value&&e!=null&&e.filterOption?` : ${n}`:""]})};le.__docgenInfo={description:"",methods:[],displayName:"DetailSelect"};export{le as D};
