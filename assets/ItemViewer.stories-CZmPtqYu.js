import{j as e,r as a,e as X}from"./iframe-CpdnR0i2.js";import{M as ie,T as ae}from"./MessageBubble-BxGl9vNj.js";import{s as _,G as me,T as de,M as ue}from"./MessageInput-DnOLJsmT.js";import{S}from"./Stack-Bd6jq2pn.js";import{B as l}from"./Box-Cc3QCFpm.js";import{T as L}from"./Typography-DUyUrCFr.js";import{E as ce}from"./EmojiPicker-CJSov6Tt.js";import"./MessageImage-BMTiF1SR.js";import"./MessageScheduled-DHC7yzgk.js";import{S as pe,G as le}from"./GroupsOutlined-Byviu6vy.js";import{B as ge}from"./Badge-D_C-h1_3.js";import{I as W}from"./Icon-C0STYbrQ.js";import"./Drawer-4cK5GzGc.js";import{F as P}from"./FormHelperText-D7QRrrp1.js";import"./SectionCategory-fz1Fy2mO.js";import"./Snackbar-DOrY7AX3.js";import{B as G}from"./button-Bp8dYhEO.js";import{S as w}from"./select-y-F9G4j3.js";import{I as z}from"./IconButton-a3Nxnak7.js";import{c as q}from"./createSvgIcon-C4MRlNQH.js";import{I as V}from"./input-D6SmNVo1.js";import{C as he}from"./ChatBubbleOutline-CQTov31q.js";import{I as fe}from"./InfoOutlined-BlQi_xdK.js";import{A as xe}from"./AddOutlined-CrGKZC9H.js";import"./FormBuilder-VRU8gP0Z.js";import"./Dialog-C_h4dTCu.js";import"./Breadcrumbs-DJz1Diib.js";import"./MessageOptions-BRMIPCkn.js";import"./eye-tE-gzFm9.js";import"./createSvgIcon-C3FiYK1r.js";import"./styled-DujYcmrZ.js";import"./createChainedFunction-BO_9K8Jh.js";import"./ownerWindow-BN2rbQ_G.js";import"./ownerDocument-DW-IO8s5.js";import"./isMuiElement-5-QtcHpW.js";import"./useForkRef-k7JvqZ8G.js";import"./useControlled-d9yX6gVw.js";import"./useTimeout-BgZTaRCc.js";import"./useIsFocusVisible-BvCl6UH0.js";import"./Avatar-FJZ4Slfo.js";import"./generateUtilityClasses-DDi6EuTn.js";import"./useSlot-CDCkmms0.js";import"./resolveComponentProps-C7XGfMdE.js";import"./isHostComponent-DVu5iVWx.js";import"./icon-button-Y5vMW5TR.js";import"./Divider-Bute_Vbv.js";import"./dividerClasses-DwUrptCk.js";import"./Link-B_9hc5w-.js";import"./InputBase-DoBoD0Ub.js";import"./formControlState-Dq1zat_P.js";import"./useFormControl-Bdg8Z9sC.js";import"./utils-DoM3o7-Q.js";import"./FormControl-8E0NZ6Fd.js";import"./FormControlLabel-CnPiBcgg.js";import"./Switch-pj7-AGL8.js";import"./SwitchBase-COxA6MWJ.js";import"./ButtonBase-DfyOkDKJ.js";import"./TransitionGroupContext-B3hU1AzR.js";import"./usePreviousProps-gH0S_yWp.js";import"./useSlotProps-DcuCg741.js";import"./useTheme-dL_JtiI5.js";import"./utils-Be2lOGi8.js";import"./index-CoYqnUvw.js";import"./index-wcffcyWy.js";import"./getReactElementRef-dg5jktwz.js";import"./Paper-CL1wgyoG.js";import"./Modal-DFczexqp.js";import"./Button-DOuccIOk.js";import"./InputLabel-CkLjBIwK.js";import"./FormLabel-BvCR-wSo.js";import"./Add-ClgTdUVf.js";import"./ArrowRight-CFwkqJWg.js";import"./AccordionSummary-CusgB5Ad.js";import"./Collapse-ChKwRi7e.js";import"./Grow-CSCmvqx_.js";import"./Close-J1FGOmMI.js";import"./Select-DbmNEHLt.js";import"./List-B7_zldcA.js";import"./Chip-Cxo-wOmO.js";import"./TextField-grUENmEg.js";import"./CheckCircle-D04Cnaoc.js";import"./Close-BUkdjj13.js";import"./Link-9LXCdiFD.js";const Ie=q(e.jsx("path",{d:"M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79zm9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75zM7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1"}),"CallOutlined"),ye=q(e.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"CloseOutlined"),ve=q(e.jsx("path",{d:"M22 9V7h-2v2h-2v2h2v2h2v-2h2V9zM8 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0-6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2m0 7c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4m6 5H2v-.99C2.2 16.29 5.3 15 8 15s5.8 1.29 6 2zM12.51 4.05C13.43 5.11 14 6.49 14 8s-.57 2.89-1.49 3.95C14.47 11.7 16 10.04 16 8s-1.53-3.7-3.49-3.95m4.02 9.78C17.42 14.66 18 15.7 18 17v3h2v-3c0-1.45-1.59-2.51-3.47-3.17"}),"GroupAddOutlined"),je=q(e.jsx("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 14H4V8l8 5 8-5zm-8-7L4 6h16z"}),"MailOutline"),J=q(e.jsx("path",{d:"M13 8c0-2.21-1.79-4-4-4S5 5.79 5 8s1.79 4 4 4 4-1.79 4-4m-2 0c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2M1 18v2h16v-2c0-2.66-5.33-4-8-4s-8 1.34-8 4m2 0c.2-.71 3.3-2 6-2 2.69 0 5.78 1.28 6 2zm17-3v-3h3v-2h-3V7h-2v3h-3v2h3v3z"}),"PersonAddAlt"),Me=q(e.jsx("path",{d:"M15 8v8H5V8zm1-2H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4V7c0-.55-.45-1-1-1"}),"VideocamOutlined"),Te=(n={},t)=>{var R;const[s,u]=a.useState(n.chatInterface||"CHAT"),[m,o]=a.useState(n.enableTeamChat||!1),[g,T]=a.useState(((R=n.header)==null?void 0:R.formData)||{}),[x,b]=a.useState(""),[C,i]=a.useState(null),[v,h]=a.useState({}),I=a.useMemo(()=>({chatInterface:s,enableTeamChat:m,headerFormData:g,inputValue:x,error:C,loading:v}),[s,m,g,x,C,v]),j=a.useCallback(d=>{const r=n.input;return d.trim()?r!=null&&r.maxLength&&d.length>r.maxLength?{type:"VALIDATION",message:`Message exceeds ${r.maxLength} characters`,field:"input"}:null:{type:"VALIDATION",message:"Message cannot be empty",field:"input"}},[n.input]),D=a.useCallback(d=>{var r,y,M;if((r=n.header)!=null&&r.showForm){if(!((y=d.subject)!=null&&y.trim()))return{type:"VALIDATION",message:"Subject is required",field:"subject"};if(!((M=d.to)!=null&&M.trim()))return{type:"VALIDATION",message:"Recipient is required",field:"to"}}return null},[n.header]),O=a.useCallback(d=>{var r;u(d),i(null),T({}),(r=t==null?void 0:t.onChatInterfaceChange)==null||r.call(t,d)},[t]),A=a.useCallback(d=>{var r;o(d),i(null),(r=t==null?void 0:t.onTeamChatToggle)==null||r.call(t,d)},[t]),E=a.useCallback(d=>{var r;b(d),i(null),(r=t==null?void 0:t.onInputChange)==null||r.call(t,d)},[t]),H=a.useCallback((d,r)=>{var M;const y={...g,[d]:r};T(y),i(null),(M=t==null?void 0:t.onHeaderFormChange)==null||M.call(t,d,r)},[g,t]),p=a.useCallback(async d=>{const r=j(d);if(r){i(r);return}const y=D(g);if(y){i(y);return}h(M=>({...M,isSubmitting:!0})),i(null);try{await(t==null?void 0:t.onMessageSubmit(d)),b("")}catch(M){i({type:"SUBMISSION",message:M instanceof Error?M.message:"Failed to send message",code:"SUBMISSION_ERROR"})}finally{h(M=>({...M,isSubmitting:!1}))}},[j,D,g,t]),c=a.useCallback((d,r)=>{var y;(y=t==null?void 0:t.onMessageReaction)==null||y.call(t,d,r)},[t]),f=a.useCallback((d,r)=>{var y;(y=t==null?void 0:t.onMessageOptions)==null||y.call(t,d,r)},[t]),N=a.useMemo(()=>({setChatInterface:O,setEnableTeamChat:A,setInputValue:E,setHeaderFormData:H,submitMessage:p,setMessageReaction:c,setMessageOptions:f,setError:i,setLoading:h}),[O,A,E,H,p,c,f]);return{state:I,actions:N,validation:{validateInput:j,validateHeaderForm:D}}},k=({children:n})=>e.jsx("div",{style:{display:"flex",flexDirection:"row"},children:e.jsx("div",{style:{width:"100%",boxShadow:"0px 0px 10px 0px rgba(0, 0, 0, 0.1)",borderRadius:2,display:"flex",flexDirection:"column",height:"100vh"},children:n})});k.__docgenInfo={description:"",methods:[],displayName:"MessageContainer",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""}}};const ee=({date:n})=>{const t=n.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});return e.jsx(S,{direction:"row",justifyContent:"center",alignItems:"center",sx:{my:1},children:e.jsx(l,{bgcolor:"#EFF0F2",borderRadius:20,px:1.5,py:.2,children:e.jsx(L,{variant:"caption",color:"black",fontWeight:600,children:t})})})};ee.__docgenInfo={description:"",methods:[],displayName:"DateSeparator",props:{date:{required:!0,tsType:{name:"Date"},description:""}}};const te=({content:n,enableTeamChat:t})=>{const s=a.useRef(null),[u,m]=a.useState(null),[o,g]=a.useState(null),T=a.useRef(null);let x=null;const b=i=>{console.log("Selected emoji:",i),m(null),g(null)},C=(i,v,h)=>{var I;if(u===i)m(null),g(null);else{m(i);const j=v.getBoundingClientRect();if((I=s.current)==null?void 0:I.getBoundingClientRect()){const O=h==="INCOMING"?j.right-350:j.left,A=400,E=window.innerHeight-j.bottom;j.top;const H=E>=A+10?j.bottom+10:j.top-A-10;g({x:O,y:H,messageType:h})}}};return a.useEffect(()=>{const i=v=>{T.current&&!T.current.contains(v.target)&&(m(null),g(null))};return u&&document.addEventListener("mousedown",i),()=>{document.removeEventListener("mousedown",i)}},[u]),a.useEffect(()=>{s.current&&n&&n.length>0&&setTimeout(()=>{s.current&&s.current.scrollTo({top:s.current.scrollHeight,behavior:"smooth"})},100)},[n]),a.useEffect(()=>{s.current&&setTimeout(()=>{s.current&&s.current.scrollTo({top:s.current.scrollHeight,behavior:"auto"})},50)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(l,{ref:s,sx:{..._.messagesContainer(n==null?void 0:n.length,t),flex:1,overflowY:"auto",display:"flex",flexDirection:"column",gap:1,maxHeight:"100vh","&::-webkit-scrollbar":{display:"none"},"-ms-overflow-style":"none",scrollbarWidth:"none"},children:[e.jsx(l,{sx:{flexGrow:1,minHeight:0}}),(n==null?void 0:n.length)>0?n.map((i,v)=>{const h=i.createdAt&&(!x||x.toDateString()!==i.createdAt.toDateString());x=i.createdAt?new Date(i.createdAt):x;const I=`message-${v}`;return e.jsxs(X.Fragment,{children:[h&&i.createdAt&&e.jsx(ee,{date:i.createdAt}),e.jsx(ie,{message:i,messageId:I,isEmojiPickerActive:u===I,onAddReactionClick:C})]},v)}):e.jsx(S,{sx:{..._.emptyContainer,display:"flex",justifyContent:"center",alignItems:"center",height:"100%",minHeight:"200px"},children:e.jsx(l,{sx:_.emptyMessageBox,children:e.jsx(L,{variant:"body2",fontWeight:600,color:"text.secondary",children:"You must specify a subject to send a chat"})})})]}),u&&o&&e.jsx(l,{ref:T,sx:{position:"fixed",left:o.x,top:o.y,zIndex:1e3},children:e.jsx(ce,{onEmojiSelect:b})})]})};te.__docgenInfo={description:"",methods:[],displayName:"Messages",props:{content:{required:!0,tsType:{name:"Array",elements:[{name:"IMessage"}],raw:"IMessage[]"},description:""},enableTeamChat:{required:!0,tsType:{name:"boolean"},description:""}}};const ne=({checked:n,setChecked:t})=>e.jsx(pe,{color:"info",checked:n,onChange:s=>t(s.target.checked),label:e.jsx(S,{sx:{flexDirection:"row",alignItems:"center",gap:1,px:1,transition:"padding 0.3s ease"},children:e.jsx(ge,{color:"secondary",variant:"dot",invisible:n,sx:{"& .MuiBadge-badge.MuiBadge-dot":{minWidth:6,height:6,bgcolor:"rgba(139, 92, 242, 1)",top:"10%",right:"10%"}},children:e.jsx(le,{sx:{color:n?"rgba(139, 92, 242, 1)":void 0,transition:"color 0.3s ease-in-out"}})})}),formlabelProps:{sx:{background:n?"rgba(222, 211, 254, 1)":void 0}}});ne.__docgenInfo={description:"",methods:[],displayName:"TeamChatSwitch",props:{checked:{required:!0,tsType:{name:"boolean"},description:""},setChecked:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"value"}],return:{name:"void"}}},description:""}}};const F=()=>e.jsxs(l,{display:"flex",gap:2,alignItems:"center",children:[e.jsx(z,{children:e.jsx(Ie,{})}),e.jsx(z,{children:e.jsx(Me,{})}),e.jsx(z,{children:e.jsx(ye,{})})]});F.__docgenInfo={description:"",methods:[],displayName:"HeaderActions"};const se=({headerFormData:n,onHeaderFormChange:t,chatInterface:s,enableTeamChat:u})=>{if(u)return null;const m=()=>{switch(s){case"EMAIL":return e.jsxs(S,{display:"flex",flexDirection:"column",children:[e.jsx(P,{variant:"standard",children:e.jsx(w,{label:"To",labelId:"email-to-select-label",id:"email-to-select",value:n.to||"",onChange:o=>t("to",o.target.value),options:["Option 1","Option 2","Option 3"]})}),e.jsx(P,{variant:"standard",children:e.jsx(w,{label:"CC",labelId:"email-cc-select-label",id:"email-cc-select",value:n.cc||"",onChange:o=>t("cc",o.target.value),options:["Option 1","Option 2","Option 3"]})}),e.jsx(P,{variant:"standard",children:e.jsx(V,{sx:{mt:2},placeholder:"Subject",value:n.subject,onChange:o=>t("subject",o.target.value)})})]});case"SMS":return e.jsx(S,{display:"flex",flexDirection:"column",gap:2,children:e.jsxs(l,{display:"flex",flexDirection:"column",children:[e.jsx(w,{value:n.from||"",label:"From",labelId:"sms-from-select-label",id:"sms-from-select",sx:{margin:0},onChange:o=>t("from",o.target.value),options:["Option 1","Option 2","Option 3"]}),e.jsx(V,{sx:{mt:2},placeholder:"To",value:n.to,onChange:o=>t("to",o.target.value)})]})});case"MMS":return e.jsx(S,{display:"flex",flexDirection:"column",gap:2,children:e.jsxs(l,{display:"flex",flexDirection:"column",children:[e.jsx(w,{value:Array.isArray(n==null?void 0:n.to)?n.to:[],label:"To",labelId:"sms-from-select-label",id:"sms-from-select",multiple:!0,sx:{margin:0},onChange:o=>t("to",o.target.value),options:["Option 1","Option 2","Option 3"]}),e.jsx(V,{sx:{mt:2},placeholder:"Subject",value:n.subject,onChange:o=>t("subject",o.target.value)})]})});case"CHAT":return e.jsx(l,{children:e.jsxs(S,{display:"flex",flexDirection:"column",children:[e.jsx(P,{variant:"standard",children:e.jsx(w,{value:n.to||"",label:"To",labelId:"chat-to-select-label",id:"chat-to-select",options:["James","John","Jane"],onChange:o=>t("to",o.target.value)})}),e.jsx(P,{variant:"standard",children:e.jsx(V,{sx:{mt:2},placeholder:"Subject",value:n.subject,onChange:o=>t("subject",o.target.value)})})]})});default:return null}};return e.jsx(l,{children:m()})};se.__docgenInfo={description:"",methods:[],displayName:"HeaderForm",props:{headerFormData:{required:!0,tsType:{name:"HeaderFormData"},description:""},onHeaderFormChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(field: keyof HeaderFormData, value: string | string[]) => void",signature:{arguments:[{type:{name:"HeaderFormData"},name:"field"},{type:{name:"union",raw:"string | string[]",elements:[{name:"string"},{name:"Array",elements:[{name:"string"}],raw:"string[]"}]},name:"value"}],return:{name:"void"}}},description:""},chatInterface:{required:!0,tsType:{name:"string"},description:""},enableTeamChat:{required:!0,tsType:{name:"boolean"},description:""}}};const K={CHAT:{icon:he,color:"#1C7AE0"},EMAIL:{icon:je,color:"#6466F1"},SMS:{icon:de,color:"#A754F5"},MMS:{icon:me,color:"#15B8A6"}},Se=n=>{switch(n){case"EMAIL":return"Email subject example";case"SMS":return"+123 456 7890";case"MMS":return"Chat Subject example";case"CHAT":return"Email subject example";default:return""}},Y="all 0.3s ease-in-out",oe=({chatInterface:n,enableTeamChat:t,setEnableTeamChat:s,isEmpty:u,headerFormData:m,onHeaderFormChange:o})=>{const{icon:g,color:T}=K[n]||K.CHAT;return e.jsxs(l,{children:[!u&&e.jsxs(l,{display:"flex",bgcolor:t?"#F4F0FF":"#E2E8F0",justifyContent:"space-between",alignItems:"center",p:2,sx:{transition:Y},children:[e.jsxs(l,{display:"flex",gap:2,alignItems:"center",children:[e.jsx(L,{variant:"h5",children:"Patient Name"}),e.jsx(fe,{}),e.jsx(L,{variant:"caption",color:"#1C7AE0",children:"Show all threads"})]}),e.jsx(F,{})]}),e.jsxs(l,{p:3,bgcolor:t?"#F4F0FF":"",sx:{transition:Y},children:[e.jsxs(l,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(S,{direction:"row",gap:3,alignItems:"center",children:[e.jsx(W,{icon:g,size:"medium",sx:{color:T}}),u?e.jsx(G,{appearence:"outlined",size:"small",sx:{borderRadius:"10px",textTransform:"none",borderColor:"#CAC4D0",color:"black","&:hover":{backgroundColor:"transparent",borderColor:"#CAC4D0"}},endIcon:e.jsx(J,{}),children:"Assign"}):e.jsxs(e.Fragment,{children:[e.jsx(ae,{}),e.jsx(L,{variant:"h5",children:Se(n)}),e.jsx(G,{appearence:"outlined",size:"small",sx:{borderRadius:"10px",textTransform:"none",borderColor:"#CAC4D0",color:"black","&:hover":{backgroundColor:"transparent",borderColor:"#CAC4D0"}},endIcon:e.jsx(J,{}),children:"Assign"})]})]}),u&&e.jsx(F,{}),!u&&e.jsx(ne,{checked:t,setChecked:s})]}),!u&&!t&&e.jsxs(l,{display:"flex",flexDirection:"column",sx:{mt:2},children:[n==="SMS"&&e.jsx(w,{value:(m==null?void 0:m.from)||"",label:"From: +123 456 7890",sx:{margin:0},onChange:x=>o==null?void 0:o("from",x.target.value),options:["Option 1","Option 2","Option 3"]}),n==="EMAIL"&&e.jsx(w,{value:(m==null?void 0:m.cc)||"",label:"CC",sx:{margin:0},onChange:x=>o==null?void 0:o("cc",x.target.value),options:["Option 1","Option 2","Option 3"]}),n==="MMS"&&e.jsx(w,{value:Array.isArray(m==null?void 0:m.cc)?m.cc:[],label:"CC",sx:{margin:0},multiple:!0,onChange:x=>o==null?void 0:o("cc",x.target.value),options:["Option 1","Option 2","Option 3"]})]}),u&&m&&o&&e.jsx(se,{headerFormData:m,onHeaderFormChange:o,chatInterface:n,enableTeamChat:t}),!t&&e.jsx(l,{mt:n=="SMS"&&!u?2:1,children:e.jsxs(S,{display:"flex",flexDirection:"row",gap:2,alignItems:"center",children:[e.jsx(W,{icon:ve,size:"medium"}),e.jsx(G,{appearence:"outlined",size:"small",color:"secondary",sx:{textTransform:"none"},startIcon:e.jsx(xe,{}),children:"Tag"})]})})]})]})};oe.__docgenInfo={description:"",methods:[],displayName:"HeaderContent",props:{chatInterface:{required:!0,tsType:{name:"union",raw:'"CHAT" | "SMS" | "EMAIL" | "MMS"',elements:[{name:"literal",value:'"CHAT"'},{name:"literal",value:'"SMS"'},{name:"literal",value:'"EMAIL"'},{name:"literal",value:'"MMS"'}]},description:""},enableTeamChat:{required:!0,tsType:{name:"boolean"},description:""},setEnableTeamChat:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"value"}],return:{name:"void"}}},description:""},isEmpty:{required:!0,tsType:{name:"boolean"},description:""},headerFormData:{required:!1,tsType:{name:"HeaderFormData"},description:""},onHeaderFormChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(field: keyof HeaderFormData, value: string | string[]) => void",signature:{arguments:[{type:{name:"HeaderFormData"},name:"field"},{type:{name:"union",raw:"string | string[]",elements:[{name:"string"},{name:"Array",elements:[{name:"string"}],raw:"string[]"}]},name:"value"}],return:{name:"void"}}},description:""}}};const re=({chatInterface:n,content:t,enableTeamChat:s,setEnableTeamChat:u,headerFormData:m,onHeaderFormChange:o})=>{const g=(t==null?void 0:t.length)===0;return e.jsx(oe,{chatInterface:n,enableTeamChat:s,setEnableTeamChat:u,isEmpty:g,headerFormData:m,onHeaderFormChange:o})};re.__docgenInfo={description:"",methods:[],displayName:"MessageHeader",props:{chatInterface:{required:!0,tsType:{name:"union",raw:'"CHAT" | "SMS" | "EMAIL" | "MMS"',elements:[{name:"literal",value:'"CHAT"'},{name:"literal",value:'"SMS"'},{name:"literal",value:'"EMAIL"'},{name:"literal",value:'"MMS"'}]},description:""},content:{required:!1,tsType:{name:"any"},description:""},enableTeamChat:{required:!0,tsType:{name:"boolean"},description:""},setEnableTeamChat:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"value"}],return:{name:"void"}}},description:""},headerFormData:{required:!1,tsType:{name:"HeaderFormData"},description:""},onHeaderFormChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(field: keyof HeaderFormData, value: string | string[]) => void",signature:{arguments:[{type:{name:"HeaderFormData"},name:"field"},{type:{name:"union",raw:"string | string[]",elements:[{name:"string"},{name:"Array",elements:[{name:"string"}],raw:"string[]"}]},name:"value"}],return:{name:"void"}}},description:""}}};const Ae=[{type:"INCOMING",text:"Welcome! Send a message to see sample messages with different features.",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=John",createdAt:new Date(Date.now()-6e4),isTranslated:!1},{type:"OUTGOING",text:"Hello! I'm ready to test the message features.",avatar:"https://avatar.iran.liara.run/public",createdAt:new Date(Date.now()-3e4),role:"User"}],U=X.memo(({messages:n,config:t={},callbacks:s,loading:u,error:m,className:o,"data-testid":g})=>{var O,A,E,H;const[T,x]=a.useState(n||Ae),[b,C]=a.useState({isSubmitting:!1}),[i,v]=a.useState(null),{state:h,actions:I}=Te(t,{onMessageSubmit:async p=>{var c;C({isSubmitting:!0}),v(null);try{await new Promise(r=>setTimeout(r,1e3));const f={type:"OUTGOING",text:p,createdAt:new Date,avatar:"https://avatar.iran.liara.run/public",reactions:[{icon:"👍",count:2},{icon:"❤️",count:1}],scheduledTime:new Date(Date.now()+1440*60*1e3),role:"User"},N=[{type:"INCOMING",text:"Thanks for your message! Here's a sample response with different features.",createdAt:new Date,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Felix",isTranslated:!0,link:"https://example.com/help",image:{fileName:"sample-image.jpg",url:"https://picsum.photos/400/300"},reactions:[{icon:"🎉",count:3},{icon:"🔥",count:1}]},{type:"INCOMING",text:"Great question! Let me share some helpful information with you.",createdAt:new Date,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Sarah",isTranslated:!1,image:{fileName:"document.pdf",url:"https://picsum.photos/300/400"},reactions:[{icon:"📚",count:2},{icon:"💡",count:1}]},{type:"INCOMING",text:"I understand your concern. Here's what I found for you.",createdAt:new Date,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Mike",isTranslated:!0,link:"https://docs.example.com/solution",reactions:[{icon:"✅",count:4},{icon:"🎯",count:2}]},{type:"INCOMING",text:"That's interesting! Here's a visual example of what you're asking about.",createdAt:new Date,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Emma",isTranslated:!1,image:{fileName:"diagram.png",url:"https://picsum.photos/500/300"},reactions:[{icon:"👀",count:1},{icon:"🤔",count:1}]},{type:"INCOMING",text:"Perfect! I've processed your request and here are the results.",createdAt:new Date,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Alex",isTranslated:!0,link:"https://results.example.com/analysis",reactions:[{icon:"🚀",count:3},{icon:"⚡",count:1}]}],R=Math.floor(Math.random()*N.length),d=N[R];x(r=>[...r,f,d]),console.log("Message sent:",p),(c=s==null?void 0:s.onMessageSubmit)==null||c.call(s,p)}catch(f){const N=f instanceof Error?f.message:"Failed to send message";v(N),console.error("API Error:",N)}finally{C({isSubmitting:!1})}},onInputChange:p=>{var c;(c=s==null?void 0:s.onInputChange)==null||c.call(s,p)},onHeaderFormChange:(p,c)=>{var f;(f=s==null?void 0:s.onHeaderFormChange)==null||f.call(s,p,c)},onChatInterfaceChange:p=>{var c;(c=s==null?void 0:s.onChatInterfaceChange)==null||c.call(s,p)},onTeamChatToggle:p=>{var c;(c=s==null?void 0:s.onTeamChatToggle)==null||c.call(s,p)},onMessageReaction:(p,c)=>{var f;(f=s==null?void 0:s.onMessageReaction)==null||f.call(s,p,c)},onMessageOptions:(p,c)=>{var f;(f=s==null?void 0:s.onMessageOptions)==null||f.call(s,p,c)}}),j={...h.loading,...b,...u},D=i||h.error||m;return e.jsx(l,{className:o,"data-testid":g,sx:{width:((O=t.container)==null?void 0:O.width)||"100%",height:((A=t.container)==null?void 0:A.height)||"auto",maxWidth:(E=t.container)==null?void 0:E.maxWidth,minHeight:(H=t.container)==null?void 0:H.minHeight},children:e.jsxs(k,{children:[e.jsx(re,{chatInterface:h.chatInterface,content:T,enableTeamChat:h.enableTeamChat,setEnableTeamChat:I.setEnableTeamChat,headerFormData:h.headerFormData,onHeaderFormChange:I.setHeaderFormData}),e.jsx(te,{content:T,enableTeamChat:h.enableTeamChat}),e.jsx(ue,{enableTeamChat:h.enableTeamChat,chatInterface:h.chatInterface,setChatInterface:I.setChatInterface,onSubmit:I.submitMessage,onInputChange:I.setInputValue,config:{...t.input,error:!!D,disabled:j.isSubmitting}})]})})});U.displayName="ItemViewer";U.__docgenInfo={description:`Unified Message component for displaying and composing chat messages\r
\r
@example\r
\`\`\`tsx\r
<ItemViewer\r
  messages={messages}\r
  config={{ enableTeamChat: true }}\r
  callbacks={{ onMessageSubmit: handleSubmit }}\r
/>\r
\`\`\``,methods:[],displayName:"ItemViewer",props:{messages:{required:!0,tsType:{name:"Array",elements:[{name:"IMessage"}],raw:"IMessage[]"},description:""},config:{required:!1,tsType:{name:"MessageConfig"},description:"",defaultValue:{value:"{}",computed:!1}},callbacks:{required:!0,tsType:{name:"MessageCallbacks"},description:""},loading:{required:!1,tsType:{name:"MessageLoadingState"},description:""},error:{required:!1,tsType:{name:"union",raw:"MessageError | null",elements:[{name:"MessageError"},{name:"null"}]},description:""},className:{required:!1,tsType:{name:"string"},description:""},"data-testid":{required:!1,tsType:{name:"string"},description:""}}};const tn={title:"Organism/ItemViewer",parameters:{layout:"padded",docs:{description:{component:`
# API Integration Examples

This section demonstrates how to extract all input data from the ItemViewer component and send it to APIs.

## Key Features
- **Complete Data Extraction**: Extract messages, form data, interface settings, and metadata
- **Multiple API Types**: Support for Chat, Email, SMS, and Form APIs
- **Validation**: Built-in data validation before submission
- **Error Handling**: Comprehensive error management
- **Type Safety**: Full TypeScript support
- **Auto-scroll**: Smooth auto-scroll to bottom when new messages are added

## Data Structure
When you submit a message, the API receives:
\`\`\`json
{
  "messages": [...],
  "headerForm": { "to": "...", "subject": "..." },
  "chatInterface": "EMAIL",
  "teamChatEnabled": false,
  "inputValue": "Message content",
  "timestamp": "2024-01-15T10:32:00.000Z",
  "metadata": {
    "userAgent": "...",
    "sessionId": "...",
    "deviceInfo": { ... }
  }
}
\`\`\`
        `}}}},B={render:()=>e.jsx(U,{messages:[],config:{enableTeamChat:!1,chatInterface:"CHAT",input:{placeholder:"Type a message...",maxLength:1e3,autoFocus:!0,showCharacterCount:!1}},callbacks:{onMessageSubmit:n=>console.log("Message submitted:",n),onInputChange:n=>console.log("Input changed:",n),onHeaderFormChange:(n,t)=>console.log("Header form changed:",n,t),onChatInterfaceChange:n=>console.log("Interface changed:",n),onTeamChatToggle:n=>console.log("Team chat toggled:",n),onMessageReaction:(n,t)=>console.log("Message reaction:",n,t),onMessageOptions:(n,t)=>console.log("Message options:",n,t)}}),parameters:{docs:{description:{story:`
## Basic API Integration

Simple example showing how to extract message data and send it to a basic chat API.

### Key Features:
- Extracts message content and basic metadata
- Sends to mock API endpoint
- Handles success/error states
- Updates message list on success
- Auto-scroll to bottom when new messages are added

### API Endpoint: \`/api/chat/messages\`
        `}}}};var $,Z,Q;B.parameters={...B.parameters,docs:{...($=B.parameters)==null?void 0:$.docs,source:{originalSource:`{
  render: () => <ItemViewer messages={[]} config={{
    enableTeamChat: false,
    chatInterface: "CHAT",
    input: {
      placeholder: "Type a message...",
      maxLength: 1000,
      autoFocus: true,
      showCharacterCount: false
    }
  }} callbacks={{
    onMessageSubmit: content => console.log('Message submitted:', content),
    onInputChange: value => console.log('Input changed:', value),
    onHeaderFormChange: (field, value) => console.log('Header form changed:', field, value),
    onChatInterfaceChange: chatInterface => console.log('Interface changed:', chatInterface),
    onTeamChatToggle: enabled => console.log('Team chat toggled:', enabled),
    onMessageReaction: (messageId, reaction) => console.log('Message reaction:', messageId, reaction),
    onMessageOptions: (messageId, action) => console.log('Message options:', messageId, action)
  }} />,
  parameters: {
    docs: {
      description: {
        story: \`
## Basic API Integration

Simple example showing how to extract message data and send it to a basic chat API.

### Key Features:
- Extracts message content and basic metadata
- Sends to mock API endpoint
- Handles success/error states
- Updates message list on success
- Auto-scroll to bottom when new messages are added

### API Endpoint: \\\`/api/chat/messages\\\`
        \`
      }
    }
  }
}`,...(Q=(Z=B.parameters)==null?void 0:Z.docs)==null?void 0:Q.source}}};const nn=["Default"];export{B as Default,nn as __namedExportsOrder,tn as default};
